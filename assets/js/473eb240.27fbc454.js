"use strict";(self.webpackChunk_localrepo_benjie_dev=self.webpackChunk_localrepo_benjie_dev||[]).push([[7179],{3065:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>d,frontMatter:()=>h,metadata:()=>c,toc:()=>o});var r=a(5893),n=a(1151);const h={identifier:"865",title:"Fragment Arguments (parameterized fragments) for GraphQL",stage:"S",champion:"mjmahone",prUrl:"https://github.com/graphql/graphql-spec/pull/865",events:[{type:"commitsPushed",date:new Date("2023-01-11T00:00:00.000Z"),href:"https://github.com/graphql/graphql-spec/commit/c988b54afc72a53f403bafe24c68df0ab6ec8abc",actor:"mjmahone",commits:[{href:"https://github.com/graphql/graphql-spec/commit/c988b54afc72a53f403bafe24c68df0ab6ec8abc",headline:"Split RFC doc into graphql-wg PR",ghUser:"mjmahone",authorName:"Matt Mahoney"}]},{type:"commitsPushed",date:new Date("2023-01-05T00:00:00.000Z"),href:"https://github.com/graphql/graphql-spec/commit/9b534d98591c3f015b3a294da6bfbdd78bd4578b",actor:"mjmahone",commits:[{href:"https://github.com/graphql/graphql-spec/commit/9b534d98591c3f015b3a294da6bfbdd78bd4578b",headline:"Address Roman's comments",ghUser:"mjmahone",authorName:"mjmahone"},{href:"https://github.com/graphql/graphql-spec/commit/03bf02e2e2857627e4f9df18ee2a1351a60676c5",headline:"operation-defined",ghUser:"mjmahone",authorName:"mjmahone"},{href:"https://github.com/graphql/graphql-spec/commit/768ca345f411de3f400c42ece9f6d175438c4382",headline:"Updated RFC doc to prep for WG",ghUser:"mjmahone",authorName:"mjmahone"},{href:"https://github.com/graphql/graphql-spec/commit/aef355c8dea6ba27e10a3b12f212d17055a955e2",headline:"Updated RFC doc: explanation on required vs nullable",ghUser:"mjmahone",authorName:"mjmahone"}]},{type:"commitsPushed",date:new Date("2023-01-02T00:00:00.000Z"),href:"https://github.com/graphql/graphql-spec/commit/16be477477f7d4ad01ea15e503cac72ef16eacce",actor:"mjmahone",commits:[{href:"https://github.com/graphql/graphql-spec/commit/16be477477f7d4ad01ea15e503cac72ef16eacce",headline:"Fragment Arguments added to spec",ghUser:"mjmahone",authorName:"mjmahone"}]},{type:"prCreated",date:new Date("2021-05-05T21:41:45.000Z"),href:"https://github.com/graphql/graphql-spec/pull/865",actor:"mjmahone"},{type:"commitsPushed",date:new Date("2021-05-05T00:00:00.000Z"),href:"https://github.com/graphql/graphql-spec/commit/1b580c8fd65b1b9b71a7af8258d5aeed511dbdbb",actor:"mjmahone",commits:[{href:"https://github.com/graphql/graphql-spec/commit/1b580c8fd65b1b9b71a7af8258d5aeed511dbdbb",headline:"text changes",ghUser:"mjmahone",authorName:"Matt Mahoney"}]}],related:"1010, FeatureDiscovery, FragmentModularity",shortname:"Fragment Arguments (parameterized fragments) for GraphQL",image:"/img/rfc_tracker.png",closedAt:new Date("2023-01-19T18:31:34.000Z"),nextStage:!1},s=void 0,c={id:"865",title:"Fragment Arguments (parameterized fragments) for GraphQL",description:"At a glance",source:"@site/rfcs/865.md",sourceDirName:".",slug:"/865",permalink:"/rfcs/865",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{identifier:"865",title:"Fragment Arguments (parameterized fragments) for GraphQL",stage:"S",champion:"mjmahone",prUrl:"https://github.com/graphql/graphql-spec/pull/865",events:[{type:"commitsPushed",date:"2023-01-11T00:00:00.000Z",href:"https://github.com/graphql/graphql-spec/commit/c988b54afc72a53f403bafe24c68df0ab6ec8abc",actor:"mjmahone",commits:[{href:"https://github.com/graphql/graphql-spec/commit/c988b54afc72a53f403bafe24c68df0ab6ec8abc",headline:"Split RFC doc into graphql-wg PR",ghUser:"mjmahone",authorName:"Matt Mahoney"}]},{type:"commitsPushed",date:"2023-01-05T00:00:00.000Z",href:"https://github.com/graphql/graphql-spec/commit/9b534d98591c3f015b3a294da6bfbdd78bd4578b",actor:"mjmahone",commits:[{href:"https://github.com/graphql/graphql-spec/commit/9b534d98591c3f015b3a294da6bfbdd78bd4578b",headline:"Address Roman's comments",ghUser:"mjmahone",authorName:"mjmahone"},{href:"https://github.com/graphql/graphql-spec/commit/03bf02e2e2857627e4f9df18ee2a1351a60676c5",headline:"operation-defined",ghUser:"mjmahone",authorName:"mjmahone"},{href:"https://github.com/graphql/graphql-spec/commit/768ca345f411de3f400c42ece9f6d175438c4382",headline:"Updated RFC doc to prep for WG",ghUser:"mjmahone",authorName:"mjmahone"},{href:"https://github.com/graphql/graphql-spec/commit/aef355c8dea6ba27e10a3b12f212d17055a955e2",headline:"Updated RFC doc: explanation on required vs nullable",ghUser:"mjmahone",authorName:"mjmahone"}]},{type:"commitsPushed",date:"2023-01-02T00:00:00.000Z",href:"https://github.com/graphql/graphql-spec/commit/16be477477f7d4ad01ea15e503cac72ef16eacce",actor:"mjmahone",commits:[{href:"https://github.com/graphql/graphql-spec/commit/16be477477f7d4ad01ea15e503cac72ef16eacce",headline:"Fragment Arguments added to spec",ghUser:"mjmahone",authorName:"mjmahone"}]},{type:"prCreated",date:"2021-05-05T21:41:45.000Z",href:"https://github.com/graphql/graphql-spec/pull/865",actor:"mjmahone"},{type:"commitsPushed",date:"2021-05-05T00:00:00.000Z",href:"https://github.com/graphql/graphql-spec/commit/1b580c8fd65b1b9b71a7af8258d5aeed511dbdbb",actor:"mjmahone",commits:[{href:"https://github.com/graphql/graphql-spec/commit/1b580c8fd65b1b9b71a7af8258d5aeed511dbdbb",headline:"text changes",ghUser:"mjmahone",authorName:"Matt Mahoney"}]}],related:"1010, FeatureDiscovery, FragmentModularity",shortname:"Fragment Arguments (parameterized fragments) for GraphQL",image:"/img/rfc_tracker.png",closedAt:"2023-01-19T18:31:34.000Z",nextStage:!1},sidebar:"rfcsSidebar",previous:{title:"Spec edits for @defer/@stream",permalink:"/rfcs/742"},next:{title:"Add descriptions to executable definitions",permalink:"/rfcs/892"}},i={},o=[{value:"At a glance",id:"at-a-glance",level:2},{value:"Timeline",id:"timeline",level:2}];function m(e){const t={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"at-a-glance",children:"At a glance"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Identifier"}),": #865"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Stage"}),": ",(0,r.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/blob/main/CONTRIBUTING.md#stage-x-rejected",children:"RFCX: Superseded"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Champion"}),": ",(0,r.jsx)(t.a,{href:"https://github.com/mjmahone",children:"@mjmahone"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"PR"}),": ",(0,r.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/pull/865",children:"Fragment Arguments (parameterized fragments) for GraphQL"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Related"}),":","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"/rfcs/1010",title:"Fragment Arguments: Spec Implementation / RFCS",children:"#1010"})," (Fragment Arguments: Spec Implementation)"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"/rfcs/FeatureDiscovery",title:"Feature Discovery / RFC0",children:"FeatureDiscovery"})," (Feature Discovery)"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"/rfcs/FragmentModularity",title:"Fragment Modularity / RFC0",children:"FragmentModularity"})," (Fragment Modularity)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"timeline",children:"Timeline"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Commit pushed"}),": ",(0,r.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/commit/c988b54afc72a53f403bafe24c68df0ab6ec8abc",children:"Split RFC doc into graphql-wg PR"})," on 2023-01-11 by ",(0,r.jsx)(t.a,{href:"https://github.com/mjmahone",children:"@mjmahone"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"4 commits pushed"})," on 2023-01-05:","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/commit/9b534d98591c3f015b3a294da6bfbdd78bd4578b",children:"Address Roman's comments"})," by ",(0,r.jsx)(t.a,{href:"https://github.com/mjmahone",children:"@mjmahone"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/commit/03bf02e2e2857627e4f9df18ee2a1351a60676c5",children:"operation-defined"})," by ",(0,r.jsx)(t.a,{href:"https://github.com/mjmahone",children:"@mjmahone"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/commit/768ca345f411de3f400c42ece9f6d175438c4382",children:"Updated RFC doc to prep for WG"})," by ",(0,r.jsx)(t.a,{href:"https://github.com/mjmahone",children:"@mjmahone"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/commit/aef355c8dea6ba27e10a3b12f212d17055a955e2",children:"Updated RFC doc: explanation on required vs nullable"})," by ",(0,r.jsx)(t.a,{href:"https://github.com/mjmahone",children:"@mjmahone"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Commit pushed"}),": ",(0,r.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/commit/16be477477f7d4ad01ea15e503cac72ef16eacce",children:"Fragment Arguments added to spec"})," on 2023-01-02 by ",(0,r.jsx)(t.a,{href:"https://github.com/mjmahone",children:"@mjmahone"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsxs)(t.strong,{children:[(0,r.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/pull/865",children:"Spec PR"})," created"]})," on 2021-05-05 by mjmahone"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Commit pushed"}),": ",(0,r.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/commit/1b580c8fd65b1b9b71a7af8258d5aeed511dbdbb",children:"text changes"})," on 2021-05-05 by ",(0,r.jsx)(t.a,{href:"https://github.com/mjmahone",children:"@mjmahone"})]}),"\n"]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsxs)(t.p,{children:["This is a ",(0,r.jsx)(t.strong,{children:"proposal"})," to bring Relay-style ",(0,r.jsx)(t.a,{href:"https://www.internalfb.com/intern/staticdocs/relay/docs/api-reference/graphql-and-directives/#arguments",children:"Fragment Arguments"})," into the Spec as an ",(0,r.jsx)(t.strong,{children:"optional"}),", ",(0,r.jsx)(t.strong,{children:"client-only"})," language feature."]}),"\n",(0,r.jsx)(t.h1,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(t.p,{children:"We would allow clients to write GraphQL like:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"query Q1 {\n  ...Number(x: 100)\n}\n\nquery Q2($i: Int = 3) {\n  ...Number(x: $i)\n}\n\nfragment Number($x: Int!) on Query {\n  number(value: $x)\n}\n"})}),"\n",(0,r.jsx)(t.p,{children:"which would, prior to sending to the server, be transformed into two unique queries that  current spec-compliant servers would understand, such that it behaved like the queries were written like:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"query Q1 {\n  ...Number\n}\n\nfragment Number on Query {\n  number(value: 100)\n}\n"})}),"\n",(0,r.jsx)(t.p,{children:"and"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"query Q2($i: Int = 3) {\n  ...Number\n}\n\nfragment Number on Query {\n  number(value: $i)\n}\n"})}),"\n",(0,r.jsxs)(t.p,{children:["The exact mechanics of ",(0,r.jsx)(t.em,{children:"how"})," the query gets rewritten could be different per client, but the ",(0,r.jsx)(t.em,{children:"behavior"})," should be identical. This RFC seeks to describe the new syntax, as well as adding additional validation for clients that choose to support fragment arguments."]}),"\n",(0,r.jsx)(t.h1,{id:"background",children:"Background"}),"\n",(0,r.jsxs)(t.p,{children:["Relay has seen a lot of usage of their non-spec-compliant ",(0,r.jsx)(t.code,{children:"@arguments"})," and ",(0,r.jsx)(t.code,{children:"@argumentDefinitions"})," directives, but they're both cumbersome to use and fail basic Spec validation (directives with arguments used but never defined). They accomplish this by pre-compiling any GraphQL definitions using ",(0,r.jsx)(t.code,{children:"@arguments"})," and ",(0,r.jsx)(t.code,{children:"@argumentDefinitions"})," to transform the document such that, by the time it's sent to the server, it is spec compliant. However, Relay's user-facing directives both do not conform to the spec and also provide a pretty cumbersome, somewhat unintuitive user-facing design."]}),"\n",(0,r.jsx)(t.p,{children:"This proposal is to allow clients that pre-compile their GraphQL prior to sending it to the server (such as Relay) to have a built-in syntax for passing argument values into fragment spreads for fragments with well-defined argument definitions."}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Champion"}),": @mjmahone"]}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,n.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},1151:(e,t,a)=>{a.d(t,{Z:()=>c,a:()=>s});var r=a(7294);const n={},h=r.createContext(n);function s(e){const t=r.useContext(h);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),r.createElement(h.Provider,{value:t},e.children)}}}]);