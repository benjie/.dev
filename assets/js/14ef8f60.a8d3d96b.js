"use strict";(self.webpackChunk_localrepo_benjie_dev=self.webpackChunk_localrepo_benjie_dev||[]).push([[6108],{2255:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var i=n(5893),a=n(1151);const r={identifier:"997",title:"Expand @deprecated to Objects",stage:"1",champion:"fotoetienne",prUrl:"https://github.com/graphql/graphql-spec/pull/997",events:[{type:"commitsPushed",date:new Date("2022-10-21T00:00:00.000Z"),href:"https://github.com/graphql/graphql-spec/commit/34e5723e54a66993747826843a25f8b5ae97d9ac",actor:"fotoetienne",commits:[{href:"https://github.com/graphql/graphql-spec/commit/34e5723e54a66993747826843a25f8b5ae97d9ac",headline:"Add includeDeprecated argument to __type.possibleTypes",ghUser:"fotoetienne",authorName:"Stephen Spalding"}]},{type:"prCreated",date:new Date("2022-10-20T18:23:04.000Z"),href:"https://github.com/graphql/graphql-spec/pull/997",actor:"fotoetienne"},{type:"commitsPushed",date:new Date("2022-10-20T00:00:00.000Z"),href:"https://github.com/graphql/graphql-spec/commit/29b2cf5f4699d6d10d24f81b622ce315c669a205",actor:"fotoetienne",commits:[{href:"https://github.com/graphql/graphql-spec/commit/29b2cf5f4699d6d10d24f81b622ce315c669a205",headline:"Expand @deprecated to Objects",ghUser:"fotoetienne",authorName:"Stephen Spalding"}]}],shortname:"Expand @deprecated to Objects",image:"/img/rfc_tracker.png",nextStage:!1},s=void 0,o={id:"997",title:"Expand @deprecated to Objects",description:"At a glance",source:"@site/rfcs/997.md",sourceDirName:".",slug:"/997",permalink:"/rfcs/997",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{identifier:"997",title:"Expand @deprecated to Objects",stage:"1",champion:"fotoetienne",prUrl:"https://github.com/graphql/graphql-spec/pull/997",events:[{type:"commitsPushed",date:"2022-10-21T00:00:00.000Z",href:"https://github.com/graphql/graphql-spec/commit/34e5723e54a66993747826843a25f8b5ae97d9ac",actor:"fotoetienne",commits:[{href:"https://github.com/graphql/graphql-spec/commit/34e5723e54a66993747826843a25f8b5ae97d9ac",headline:"Add includeDeprecated argument to __type.possibleTypes",ghUser:"fotoetienne",authorName:"Stephen Spalding"}]},{type:"prCreated",date:"2022-10-20T18:23:04.000Z",href:"https://github.com/graphql/graphql-spec/pull/997",actor:"fotoetienne"},{type:"commitsPushed",date:"2022-10-20T00:00:00.000Z",href:"https://github.com/graphql/graphql-spec/commit/29b2cf5f4699d6d10d24f81b622ce315c669a205",actor:"fotoetienne",commits:[{href:"https://github.com/graphql/graphql-spec/commit/29b2cf5f4699d6d10d24f81b622ce315c669a205",headline:"Expand @deprecated to Objects",ghUser:"fotoetienne",authorName:"Stephen Spalding"}]}],shortname:"Expand @deprecated to Objects",image:"/img/rfc_tracker.png",nextStage:!1},sidebar:"rfcsSidebar",previous:{title:"Introduce Strict and Legacy All Variable Usages Are Allowed",permalink:"/rfcs/1059"},next:{title:"allow unions to include interfaces and unions",permalink:"/rfcs/950"}},l={},c=[{value:"At a glance",id:"at-a-glance",level:2},{value:"Timeline",id:"timeline",level:2},{value:"Alternative Solutions",id:"alternative-solutions",level:2}];function d(e){const t={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"at-a-glance",children:"At a glance"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Identifier"}),": #997"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Stage"}),": ",(0,i.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/blob/main/CONTRIBUTING.md#stage-1-proposal",children:"RFC1: Proposal"})]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Champion"}),": ",(0,i.jsx)(t.a,{href:"https://github.com/fotoetienne",children:"@fotoetienne"})]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"PR"}),": ",(0,i.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/pull/997",children:"Expand @deprecated to Objects"})]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"timeline",children:"Timeline"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Commit pushed"}),": ",(0,i.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/commit/34e5723e54a66993747826843a25f8b5ae97d9ac",children:"Add includeDeprecated argument to __type.possibleTypes"})," on 2022-10-21 by ",(0,i.jsx)(t.a,{href:"https://github.com/fotoetienne",children:"@fotoetienne"})]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsxs)(t.strong,{children:[(0,i.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/pull/997",children:"Spec PR"})," created"]})," on 2022-10-20 by fotoetienne"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Commit pushed"}),": ",(0,i.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/commit/29b2cf5f4699d6d10d24f81b622ce315c669a205",children:"Expand @deprecated to Objects"})," on 2022-10-20 by ",(0,i.jsx)(t.a,{href:"https://github.com/fotoetienne",children:"@fotoetienne"})]}),"\n"]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsx)(t.h1,{id:"problem",children:"Problem"}),"\n",(0,i.jsx)(t.p,{children:"Take as a motivating example:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-graphql",children:"type Query {\n  animals: [Animal]\n}\n\ninterface Animal {\n  name: String\n}\n\ntype Dog implements Animal {\n  name: String\n}\n\ntype Baiji implements Animal {\n  name: String\n}\n"})}),"\n",(0,i.jsx)(t.p,{children:"The Baiji type corresponds to an Animal that is no longer known to exist, and the server will no longer return this type.\nWe would like to delete the code for this type and eventually remove from the schema, but first clients must remove all references of this type from their queries. Currently, there is no good way to indicate to clients that they should no longer spread on this type in their queries."}),"\n",(0,i.jsx)(t.h1,{id:"solution",children:"Solution"}),"\n",(0,i.jsx)(t.p,{children:"Allow @deprecated on objects. Marking as deprecated indicates to clients that this type will no longer be returned from the server. This can indicate to client build tooling that references to this object should be removed from client queries."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-graphql",children:"type Baiji implements Animal @deprecated {\n  name: String\n}\n"})}),"\n",(0,i.jsx)(t.h2,{id:"alternative-solutions",children:"Alternative Solutions"}),"\n",(0,i.jsxs)(t.p,{children:["The most compelling use-case for deprecating types is when they are union members or interface implementations. A potential alternative would be to instead deprecate the membership/implementation instead of the type itself. The main challenge with this approach is with syntax, since it unclear how one would unambiguously annotate an interface implementation using the current ",(0,i.jsx)(t.code,{children:"@deprecated"})," directive. Some possible alternatives:"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.em,{children:"New directive location - @deprecated on UNION_MEMBER"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-graphql",children:"union Animal = Dog | Cat | Baiji @deprecated\n"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.em,{children:"New directive @deprecatedMembers on UNION"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-graphql",children:'union Animal @deprecatedMembers(members: ["Baiji"]) = Dog | Cat | Baiji\n'})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.em,{children:"New directive @deprecatedImplementations on OBJECT"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-graphql",children:'type Baiji implements Node & Animal @deprecatedImplementations(implementations: ["Animal"]) {\n  id: ID!\n  name: String\n}\n'})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.em,{children:"New directive @deprecatedImplementations on INTERFACE"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-graphql",children:'interface Animal @deprecatedImplementations(implementations: ["Baiji"]) {\n  id: ID!\n  name: String\n}\n'})}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>o,a:()=>s});var i=n(7294);const a={},r=i.createContext(a);function s(e){const t=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);