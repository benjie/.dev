"use strict";(self.webpackChunk_localrepo_benjie_dev=self.webpackChunk_localrepo_benjie_dev||[]).push([[8512],{6945:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var t=i(5893),s=i(1151);const r={identifier:"FieldExtensions",stage:"0",title:"Field Extensions",events:[{type:"docCreated",date:new Date("2025-04-25T13:06:33.000Z"),href:"https://github.com/graphql/graphql-wg/blob/02f0d30971b6d5183a23b8ceba11fd1af4f36e50/rfcs/FieldExtensions.md",actor:"Martin Bonnin"}],related:"SchemaCoordinates",shortname:"Field Extensions",image:"/img/rfc_tracker.png"},l=void 0,a={id:"FieldExtensions",title:"Field Extensions",description:"At a glance",source:"@site/rfcs/FieldExtensions.md",sourceDirName:".",slug:"/FieldExtensions",permalink:"/rfcs/FieldExtensions",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{identifier:"FieldExtensions",stage:"0",title:"Field Extensions",events:[{type:"docCreated",date:"2025-04-25T13:06:33.000Z",href:"https://github.com/graphql/graphql-wg/blob/02f0d30971b6d5183a23b8ceba11fd1af4f36e50/rfcs/FieldExtensions.md",actor:"Martin Bonnin"}],related:"SchemaCoordinates",shortname:"Field Extensions",image:"/img/rfc_tracker.png"},sidebar:"rfcsSidebar",previous:{title:"Add Transitional Non-Null appendix (`@noPropagate` directive)",permalink:"/rfcs/1165"},next:{title:"SemanticNonNull type (null only on error)",permalink:"/rfcs/1065"}},o={},d=[{value:"At a glance",id:"at-a-glance",level:2},{value:"Timeline",id:"timeline",level:2},{value:"Problem statement",id:"problem-statement",level:2},{value:"Proposal",id:"proposal",level:2}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"at-a-glance",children:"At a glance"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Identifier"}),": FieldExtensions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Stage"}),": ",(0,t.jsx)(n.a,{href:"https://github.com/graphql/graphql-spec/blob/main/CONTRIBUTING.md#stage-0-strawman",children:"RFC0: Strawman"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Champion"}),": -"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"PR"}),": -"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Related"}),":","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/rfcs/SchemaCoordinates",title:"Schema Coordinates / RFC0",children:"SchemaCoordinates"})," (Schema Coordinates)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"timeline",children:"Timeline"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"https://github.com/graphql/graphql-wg/blob/02f0d30971b6d5183a23b8ceba11fd1af4f36e50/rfcs/FieldExtensions.md",children:"RFC document created"})})," on 2025-04-25 by Martin Bonnin"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.h1,{id:"rfc-field-extensions",children:"RFC: Field Extensions"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Proposed by:"})," ",(0,t.jsx)(n.a,{href:"https://mastodon.mbonnin.net/@mb",children:"Martin Bonnin"})," - Apollo"]}),"\n",(0,t.jsx)(n.h2,{id:"problem-statement",children:"Problem statement"}),"\n",(0,t.jsxs)(n.p,{children:["The current GraphQL specification allows ",(0,t.jsx)(n.a,{href:"https://spec.graphql.org/draft/#sec-Type-System-Extensions",children:"type system extensions"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["For example, it is possible to add directives to an existing type. In this example (from the ",(0,t.jsx)(n.a,{href:"https://spec.graphql.org/draft/#sel-FAHZnCNCAACCck1E",children:"specification text"}),"), a directive is added to a User type without adding fields:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:"extend type User @addedDirective\n"})}),"\n",(0,t.jsx)(n.p,{children:"The same thing is not possible for fields:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:"# This is not valid GraphQL\nextend type User {\n    id: ID! @key\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This has been an ongoing pain point when working in clients that do not own the schema but want to annotate it for codegen or other reasons. In Apollo Kotlin, this has led to the proliferation of directives ending in ",(0,t.jsx)(n.code,{children:"*Field"})," whose only goal is to work around that limitation. For an example, this is happening in the ",(0,t.jsx)(n.a,{href:"https://specs.apollo.dev/nullability/v0.4/",children:"nullability directives"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:"# This can be added to a field definition directly\ndirective @semanticNonNull(levels: [Int!]! = [0]) on FIELD_DEFINITION\n\n# This is the same thing but on the containing type.\n# It is more verbose and cumbersome to write and maintain\ndirective @semanticNonNullField(name: String!, levels: [Int!]! = [0]) repeatable on OBJECT | INTERFACE\n"})}),"\n",(0,t.jsx)(n.h2,{id:"proposal",children:"Proposal"}),"\n",(0,t.jsxs)(n.p,{children:["This proposal introduces specific syntax to add directive to existing field definitions. It builds on top of the ",(0,t.jsx)(n.a,{href:"https://github.com/graphql/graphql-wg/blob/main/rfcs/SchemaCoordinates.md",children:"schema coordinates RFC"})," to allow for a shorter syntax:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:"extend field User.id @key\n"})}),"\n",(0,t.jsx)(n.p,{children:"Or for the nullability example above:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:"extend field User.address @semanticNonNull\n"})}),"\n",(0,t.jsx)(n.p,{children:"This syntax purposedly disallows changing the type of the field and is limited to adding directives. The same validation as for other type system extensions would apply: the directive needs either not be already present or be repeatable."}),"\n",(0,t.jsx)(n.p,{children:"Syntax:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"FieldExtension:\n  extend field FieldCoordinates Directives[const]\n"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>a,a:()=>l});var t=i(7294);const s={},r=t.createContext(s);function l(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);