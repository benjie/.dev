"use strict";(self.webpackChunk_localrepo_benjie_dev=self.webpackChunk_localrepo_benjie_dev||[]).push([[1394],{3355:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>o,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>c,toc:()=>h});var a=r(5893),n=r(1151);const i={identifier:"606",title:"Support empty composite types",stage:"X",champion:"victorandree",prUrl:"https://github.com/graphql/graphql-spec/pull/606",events:[{type:"wgAgenda",href:"https://github.com/graphql/graphql-wg/blob/main/agendas/2019/2019-12-05.md",date:new Date("2019-12-05T00:00:00.000Z"),actor:null},{type:"wgNotes",href:"https://github.com/graphql/graphql-wg/blob/main/notes/2019/2019-12-05.md",date:new Date("2019-12-05T00:00:00.000Z"),actor:null},{type:"wgAgenda",href:"https://github.com/graphql/graphql-wg/blob/main/agendas/2019/2019-10-10.md",date:new Date("2019-10-10T00:00:00.000Z"),actor:null},{type:"wgNotes",href:"https://github.com/graphql/graphql-wg/blob/main/notes/2019/2019-10-10.md",date:new Date("2019-10-10T00:00:00.000Z"),actor:null},{type:"commitsPushed",date:new Date("2019-08-28T00:00:00.000Z"),href:"https://github.com/graphql/graphql-spec/commit/acae03a3903f327b552b60a84824a9a86448c916",actor:"victorandree",commits:[{href:"https://github.com/graphql/graphql-spec/commit/acae03a3903f327b552b60a84824a9a86448c916",headline:"Add note that __typename can be queried on empty types",ghUser:"victorandree",authorName:"Victor Andr\xe9e"},{href:"https://github.com/graphql/graphql-spec/commit/b9d667d22355e74800ea9d53c9c888d249304ce0",headline:"Add empty input object examples",ghUser:"victorandree",authorName:"Victor Andr\xe9e"},{href:"https://github.com/graphql/graphql-spec/commit/2ec437f4c85b7c348a1e9c21af6ece3d850f564a",headline:"Add note about empty query root operation types",ghUser:"victorandree",authorName:"Victor Andr\xe9e"}]},{type:"prCreated",date:new Date("2019-08-05T15:14:11.000Z"),href:"https://github.com/graphql/graphql-spec/pull/606",actor:"victorandree"},{type:"commitsPushed",date:new Date("2019-08-05T00:00:00.000Z"),href:"https://github.com/graphql/graphql-spec/commit/184526125af298431373e983944301b2f66497cd",actor:"victorandree",commits:[{href:"https://github.com/graphql/graphql-spec/commit/184526125af298431373e983944301b2f66497cd",headline:"Support empty composite types",ghUser:"victorandree",authorName:"Victor Andr\xe9e"}]}],related:"490, 568",shortname:"Support empty composite types",image:"/img/rfc_tracker.png",closedAt:new Date("2019-10-23T10:18:04.000Z"),nextStage:!1},s=void 0,c={id:"606",title:"Support empty composite types",description:"At a glance",source:"@site/rfcs/606.md",sourceDirName:".",slug:"/606",permalink:"/rfcs/606",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{identifier:"606",title:"Support empty composite types",stage:"X",champion:"victorandree",prUrl:"https://github.com/graphql/graphql-spec/pull/606",events:[{type:"wgAgenda",href:"https://github.com/graphql/graphql-wg/blob/main/agendas/2019/2019-12-05.md",date:"2019-12-05T00:00:00.000Z",actor:null},{type:"wgNotes",href:"https://github.com/graphql/graphql-wg/blob/main/notes/2019/2019-12-05.md",date:"2019-12-05T00:00:00.000Z",actor:null},{type:"wgAgenda",href:"https://github.com/graphql/graphql-wg/blob/main/agendas/2019/2019-10-10.md",date:"2019-10-10T00:00:00.000Z",actor:null},{type:"wgNotes",href:"https://github.com/graphql/graphql-wg/blob/main/notes/2019/2019-10-10.md",date:"2019-10-10T00:00:00.000Z",actor:null},{type:"commitsPushed",date:"2019-08-28T00:00:00.000Z",href:"https://github.com/graphql/graphql-spec/commit/acae03a3903f327b552b60a84824a9a86448c916",actor:"victorandree",commits:[{href:"https://github.com/graphql/graphql-spec/commit/acae03a3903f327b552b60a84824a9a86448c916",headline:"Add note that __typename can be queried on empty types",ghUser:"victorandree",authorName:"Victor Andr\xe9e"},{href:"https://github.com/graphql/graphql-spec/commit/b9d667d22355e74800ea9d53c9c888d249304ce0",headline:"Add empty input object examples",ghUser:"victorandree",authorName:"Victor Andr\xe9e"},{href:"https://github.com/graphql/graphql-spec/commit/2ec437f4c85b7c348a1e9c21af6ece3d850f564a",headline:"Add note about empty query root operation types",ghUser:"victorandree",authorName:"Victor Andr\xe9e"}]},{type:"prCreated",date:"2019-08-05T15:14:11.000Z",href:"https://github.com/graphql/graphql-spec/pull/606",actor:"victorandree"},{type:"commitsPushed",date:"2019-08-05T00:00:00.000Z",href:"https://github.com/graphql/graphql-spec/commit/184526125af298431373e983944301b2f66497cd",actor:"victorandree",commits:[{href:"https://github.com/graphql/graphql-spec/commit/184526125af298431373e983944301b2f66497cd",headline:"Support empty composite types",ghUser:"victorandree",authorName:"Victor Andr\xe9e"}]}],related:"490, 568",shortname:"Support empty composite types",image:"/img/rfc_tracker.png",closedAt:"2019-10-23T10:18:04.000Z",nextStage:!1},sidebar:"rfcsSidebar",previous:{title:"Add '@ignoreIfUnknown' to allow forward compatibility for clients",permalink:"/rfcs/319"},next:{title:"Require Interfaces to have 1+ Objects implementing",permalink:"/rfcs/460"}},o={},h=[{value:"At a glance",id:"at-a-glance",level:2},{value:"Timeline",id:"timeline",level:2}];function l(e){const t={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h2,{id:"at-a-glance",children:"At a glance"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Identifier"}),": #606"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Stage"}),": ",(0,a.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/blob/main/CONTRIBUTING.md#stage-x-rejected",children:"RFCX: Rejected"})]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Champion"}),": ",(0,a.jsx)(t.a,{href:"https://github.com/victorandree",children:"@victorandree"})]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"PR"}),": ",(0,a.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/pull/606",children:"Support empty composite types"})]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"timeline",children:"Timeline"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:(0,a.jsxs)(t.strong,{children:["Added to ",(0,a.jsx)(t.a,{href:"https://github.com/graphql/graphql-wg/blob/main/agendas/2019/2019-12-05.md",children:"2019-12-05 WG agenda"})]})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsxs)(t.strong,{children:["Mentioned in ",(0,a.jsx)(t.a,{href:"https://github.com/graphql/graphql-wg/blob/main/notes/2019/2019-12-05.md",children:"2019-12-05 WG notes"})]})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsxs)(t.strong,{children:["Added to ",(0,a.jsx)(t.a,{href:"https://github.com/graphql/graphql-wg/blob/main/agendas/2019/2019-10-10.md",children:"2019-10-10 WG agenda"})]})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsxs)(t.strong,{children:["Mentioned in ",(0,a.jsx)(t.a,{href:"https://github.com/graphql/graphql-wg/blob/main/notes/2019/2019-10-10.md",children:"2019-10-10 WG notes"})]})}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"3 commits pushed"})," on 2019-08-28:","\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/commit/acae03a3903f327b552b60a84824a9a86448c916",children:"Add note that __typename can be queried on empty types"})," by ",(0,a.jsx)(t.a,{href:"https://github.com/victorandree",children:"@victorandree"})]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/commit/b9d667d22355e74800ea9d53c9c888d249304ce0",children:"Add empty input object examples"})," by ",(0,a.jsx)(t.a,{href:"https://github.com/victorandree",children:"@victorandree"})]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/commit/2ec437f4c85b7c348a1e9c21af6ece3d850f564a",children:"Add note about empty query root operation types"})," by ",(0,a.jsx)(t.a,{href:"https://github.com/victorandree",children:"@victorandree"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsxs)(t.strong,{children:[(0,a.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/pull/606",children:"Spec PR"})," created"]})," on 2019-08-05 by victorandree"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Commit pushed"}),": ",(0,a.jsx)(t.a,{href:"https://github.com/graphql/graphql-spec/commit/184526125af298431373e983944301b2f66497cd",children:"Support empty composite types"})," on 2019-08-05 by ",(0,a.jsx)(t.a,{href:"https://github.com/victorandree",children:"@victorandree"})]}),"\n"]}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"Supporting empty types, e.g. objects, input objects and interfaces without any fields, has concrete use cases."}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["Support for GraphQL APIs without any ",(0,a.jsx)(t.code,{children:"Query"})," operation type fields, for example, if the API only support mutations or subscriptions (see #490). This allows defining an empty ",(0,a.jsx)(t.code,{children:"Query"})," object type, while still supporting introspection."]}),"\n",(0,a.jsxs)(t.li,{children:["Support for algebraic data types (see #568), where ",(0,a.jsx)(t.code,{children:"__typename"})," is the only relevant field"]}),"\n",(0,a.jsx)(t.li,{children:'Potentially to support "well-known" (but empty) extensions of the introspection schema (see #300)'}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["This is a minimalist spec change, which simply removes the relevant items under the type validation sub sections. It would probably be helpful to motivate the change and mention that one or more fields ",(0,a.jsx)(t.em,{children:"should"})," be present for a (typically) useful schema."]}),"\n",(0,a.jsx)(t.p,{children:'The requirement for composite types (object, input objects and interfaces) to define "one or more fields" was introduced in 059941486fcea9b93c5a156fe80df03d2021c0b4. This change references graphql/graphql-js#368, motivating the change with:'}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"Since GraphQL always requires you to select fields down to scalar values, an Object type without any defined fields cannot be accessed in any way in a query. This could be even more problematic for Input Objects where a required input object argument with no fields could result in a field that is impossible to query without producing an error."}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"With regards to these objections:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["It's always possible to select ",(0,a.jsx)(t.code,{children:"__typename"})," and therefore even empty object types can be useful (as e.g. algebraic data types)"]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Passing an empty input object appears syntactically valid:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-gql",children:"mutation {\n  update(input: {}) {\n    name\n  }\n}\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"I think this proposal fulfills the guiding principles by enabling new capabilities motivated by real use cases. This change does not make any previously valid schema invalid, so largely preseves backwards compatibility."}),"\n",(0,a.jsxs)(t.p,{children:["Fixes #568 and fixes #490 at the specification level. I've forked graphql-js to remove the corresponding validations (see ",(0,a.jsx)(t.a,{href:"https://github.com/victorandree/graphql-js/tree/rfc/empty-objects",children:"https://github.com/victorandree/graphql-js/tree/rfc/empty-objects"}),")."]}),"\n"]})]})}function p(e={}){const{wrapper:t}={...(0,n.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},1151:(e,t,r)=>{r.d(t,{Z:()=>c,a:()=>s});var a=r(7294);const n={},i=a.createContext(n);function s(e){const t=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);