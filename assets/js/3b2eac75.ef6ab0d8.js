"use strict";(self.webpackChunk_localrepo_benjie_dev=self.webpackChunk_localrepo_benjie_dev||[]).push([[8132],{2738:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var s=t(5893),a=t(1151),i=(t(4664),t(768));const r={type:"page",title:"Static Documents",description:"Best practices dictate that you should not generate GraphQL documents dynamically, instead they should be hardcoded into your applications and variables should be supplied to specify dynamic parameters.",tag:"graphql",author:"Benjie",breadcrumb:!1,sidebar_position:28},c="Static vs Dynamic Documents",o={id:"graphql/static-documents",title:"Static Documents",description:"Best practices dictate that you should not generate GraphQL documents dynamically, instead they should be hardcoded into your applications and variables should be supplied to specify dynamic parameters.",source:"@site/pages/graphql/static-documents.mdx",sourceDirName:"graphql",slug:"/graphql/static-documents",permalink:"/graphql/static-documents",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:28,frontMatter:{type:"page",title:"Static Documents",description:"Best practices dictate that you should not generate GraphQL documents dynamically, instead they should be hardcoded into your applications and variables should be supplied to specify dynamic parameters.",tag:"graphql",author:"Benjie",breadcrumb:!1,sidebar_position:28},sidebar:"defaultSidebar",previous:{title:"Trusted Documents",permalink:"/graphql/trusted-documents"},next:{title:"Naming Conventions",permalink:"/graphql/naming"}},l={},d=[{value:"\ud83d\udeab Dynamic documents",id:"-dynamic-documents",level:2},{value:"\u2705 Static documents",id:"-static-documents",level:2},{value:"Other terms",id:"other-terms",level:2}];function u(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"static-vs-dynamic-documents",children:"Static vs Dynamic Documents"}),"\n",(0,s.jsx)(i.u,{children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Do not generate GraphQL documents dynamically"}),", instead write reusable\ndocuments and supply variables at runtime to safely specify dynamic parameters."]})}),"\n",(0,s.jsx)(n.h2,{id:"-dynamic-documents",children:"\ud83d\udeab Dynamic documents"}),"\n",(0,s.jsx)(n.p,{children:"Typically, dynamic documents are generated at runtime through string\nconcatenation or AST manipulation. For example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'query = "query GetUser { user(id: "\nquery += userId\nquery += ") { name"\nif (showAvatar) {\n  query += " avatarUrl"\n}\nquery += " } }"\n'})}),"\n",(0,s.jsx)(n.p,{children:"This technique has a lot of drawbacks:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Potentially infinite documents issued to server, which must validate each new\ndocument at runtime."}),"\n",(0,s.jsxs)(n.li,{children:["Cannot easily analyze/lint with common tooling (e.g.\n",(0,s.jsx)(n.a,{href:"https://the-guild.dev/graphql/eslint/docs",children:(0,s.jsx)(n.code,{children:"graphql-eslint"})})," or\n",(0,s.jsx)(n.a,{href:"https://github.com/graphile/gqlcheck",children:(0,s.jsx)(n.code,{children:"gqlcheck"})}),")."]}),"\n",(0,s.jsx)(n.li,{children:"Hard to spot syntax/AST mistakes; needs thorough testing."}),"\n",(0,s.jsx)(n.li,{children:"Vulnerable to GraphQL injection."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"-static-documents",children:"\u2705 Static documents"}),"\n",(0,s.jsx)(n.p,{children:"With static documents you write reusable documents such as:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"query = `\n  query GetUser(\n    $userId: Int!\n    $showAvatar: Boolean! = false\n  ) {\n    user(id: $userId) {\n      name\n      avatarUrl @include(if: $showAvatar)\n    }\n  }\n`\n"})}),"\n",(0,s.jsx)(n.p,{children:"And then you supply variables at run-time to populate the placeholders:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"variables = { userId, showAvatar }\n"})}),"\n",(0,s.jsx)(n.p,{children:"This has a lot of advantages:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Syntax highlighting and auto-complete directly in your editor (when\nsupported)."}),"\n",(0,s.jsx)(n.li,{children:"Easy to copy/paste into GraphiQL or similar IDE for debugging."}),"\n",(0,s.jsx)(n.li,{children:"Easy to use with standard GraphQL tooling such as linting."}),"\n",(0,s.jsx)(n.li,{children:"Not vulnerable to GraphQL injection."}),"\n",(0,s.jsx)(n.li,{children:"Validate each document once, no need to re-check when the variable values\nchange."}),"\n",(0,s.jsxs)(n.li,{children:["Supports ",(0,s.jsx)(n.a,{href:"/graphql/trusted-documents",children:'"trusted documents"'})," security feature."]}),"\n",(0,s.jsx)(n.li,{children:"Can check validity at build time - remove need for runtime validation."}),"\n",(0,s.jsx)(n.li,{children:"Easy to track which fields are in use."}),"\n",(0,s.jsx)(n.li,{children:"Server can optimize known queries."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"You should always use static documents unless there's a very good reason not to."}),"\n",(0,s.jsx)(n.h2,{id:"other-terms",children:"Other terms"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Ad-hoc documents"})," are those written on the fly, generally by a human."]})]})}function h(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},4664:(e,n,t)=>{t.d(n,{Z:()=>i});t(7294);const s="pullquote_fEhA";var a=t(5893);const i=e=>{let{children:n}=e;return(0,a.jsx)("aside",{className:s,children:(0,a.jsx)("blockquote",{children:n})})}},768:(e,n,t)=>{t.d(n,{u:()=>r});t(7294);const s="tldr_fcon",a="inner_JkE_";var i=t(5893);const r=e=>{let{children:n}=e;return(0,i.jsx)("aside",{className:s,children:(0,i.jsx)("div",{className:a,children:n})})}},1151:(e,n,t)=>{t.d(n,{Z:()=>c,a:()=>r});var s=t(7294);const a={},i=s.createContext(a);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);