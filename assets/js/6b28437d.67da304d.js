"use strict";(self.webpackChunk_localrepo_benjie_dev=self.webpackChunk_localrepo_benjie_dev||[]).push([[8831],{3018:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var n=t(5893),i=t(1151);const s={identifier:"FeatureDiscovery",stage:"0",title:"Feature Discovery",events:[{type:"docUpdated",date:new Date("2023-11-28T17:58:57.000Z"),href:"https://github.com/graphql/graphql-wg/blob/5bfb8d590cc9693db1149b547d8db5041f05b731/rfcs/FeatureDiscovery.md",actor:"Benjie Gillam"},{type:"docCreated",date:new Date("2023-08-19T10:02:15.000Z"),href:"https://github.com/graphql/graphql-wg/blob/ced6f6f0566fcf06f775c2fb312ddbfbc47b9bf8/rfcs/FeatureDiscovery.md",actor:"Young Min Kim"}],related:"865, 895, wg839",shortname:"Feature Discovery",image:"/img/rfc_tracker.png"},a=void 0,o={id:"FeatureDiscovery",title:"Feature Discovery",description:"At a glance",source:"@site/rfcs/FeatureDiscovery.md",sourceDirName:".",slug:"/FeatureDiscovery",permalink:"/rfcs/FeatureDiscovery",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{identifier:"FeatureDiscovery",stage:"0",title:"Feature Discovery",events:[{type:"docUpdated",date:"2023-11-28T17:58:57.000Z",href:"https://github.com/graphql/graphql-wg/blob/5bfb8d590cc9693db1149b547d8db5041f05b731/rfcs/FeatureDiscovery.md",actor:"Benjie Gillam"},{type:"docCreated",date:"2023-08-19T10:02:15.000Z",href:"https://github.com/graphql/graphql-wg/blob/ced6f6f0566fcf06f775c2fb312ddbfbc47b9bf8/rfcs/FeatureDiscovery.md",actor:"Young Min Kim"}],related:"865, 895, wg839",shortname:"Feature Discovery",image:"/img/rfc_tracker.png"},sidebar:"rfcsSidebar",previous:{title:"Schema Coordinates",permalink:"/rfcs/SchemaCoordinates"},next:{title:"Polymorphic-capable composite symmetric input/output type (`struct`)",permalink:"/rfcs/Struct"}},l={},c=[{value:"At a glance",id:"at-a-glance",level:2},{value:"Timeline",id:"timeline",level:2},{value:"\ud83d\udcdc Problem Statement",id:"-problem-statement",level:2},{value:"\u2705 RFC Goals",id:"-rfc-goals",level:2},{value:"\ud83d\udeab RFC Non-goals",id:"-rfc-non-goals",level:2},{value:"\ud83d\uddff Prior Art",id:"-prior-art",level:2},{value:"Related Issues",id:"related-issues",level:2},{value:"\ud83e\uddd1\u200d\ud83d\udcbb Proposed Solution",id:"-proposed-solution",level:2},{value:"Option A: Extending a schema for schema introspection",id:"option-a-extending-a-schema-for-schema-introspection",level:3},{value:"Option B: Add a new root-level meta field next to <code>__schema</code> and <code>__type</code>",id:"option-b-add-a-new-root-level-meta-field-next-to-__schema-and-__type",level:3},{value:"Option C: TBD",id:"option-c-tbd",level:3}];function d(e){const r={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h2,{id:"at-a-glance",children:"At a glance"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Identifier"}),": FeatureDiscovery"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Stage"}),": ",(0,n.jsx)(r.a,{href:"https://github.com/graphql/graphql-spec/blob/main/CONTRIBUTING.md#stage-0-strawman",children:"RFC0: Strawman"})]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Champion"}),": -"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"PR"}),": -"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Related"}),":","\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"/rfcs/865",title:"Fragment Arguments (parameterized fragments) for GraphQL / RFCX",children:"#865"})," (Fragment Arguments (parameterized fragments) for GraphQL)"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"/rfcs/895",title:"Client Controlled Nullability / RFCX",children:"#895"})," (Client Controlled Nullability)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"timeline",children:"Timeline"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:(0,n.jsx)(r.a,{href:"https://github.com/graphql/graphql-wg/blob/5bfb8d590cc9693db1149b547d8db5041f05b731/rfcs/FeatureDiscovery.md",children:"RFC document updated"})})," on 2023-11-28 by Benjie Gillam"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:(0,n.jsx)(r.a,{href:"https://github.com/graphql/graphql-wg/blob/ced6f6f0566fcf06f775c2fb312ddbfbc47b9bf8/rfcs/FeatureDiscovery.md",children:"RFC document created"})})," on 2023-08-19 by Young Min Kim"]}),"\n"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.blockquote,{children:["\n",(0,n.jsx)(r.h1,{id:"rfc-feature-discovery",children:"RFC: Feature Discovery"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"Proposed by:"})}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"https://github.com/aprilrd",children:"Young Min Kim"})," - The Trade Desk"]}),"\n"]}),"\n",(0,n.jsx)(r.p,{children:"This RFC provides a way for the clients to determine if a GraphQL server supports a feature that cannot be discovered through the current GraphQL introspection functionality."}),"\n",(0,n.jsx)(r.h2,{id:"-problem-statement",children:"\ud83d\udcdc Problem Statement"}),"\n",(0,n.jsxs)(r.p,{children:["Thus far, a GraphQL client could use the ",(0,n.jsx)(r.a,{href:"https://spec.graphql.org/draft/#sec-Schema-Introspection.Schema-Introspection-Schema",children:"schema introspection"})," to check if a feature is available on a server. For example, a client can discover Defer/Stream through the ",(0,n.jsx)(r.code,{children:"directives"})," field and Input Union through the ",(0,n.jsx)(r.code,{children:"mutationType"})," field."]}),"\n",(0,n.jsx)(r.p,{children:"However, some new GraphQL features such as Client Controlled Nullability, Fragment Arguments, and Fragment Modularity change the syntax of the GraphQL documents, which cannot be described via the existing schema introspection. We would like a way to describe a server's supported feature set in an unambigous way."}),"\n",(0,n.jsx)(r.h2,{id:"-rfc-goals",children:"\u2705 RFC Goals"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:"A unambigous way to describe a supported feature set"}),"\n",(0,n.jsx)(r.li,{children:"Open a path for developer tools to validate documents based on the target server's supported features"}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"-rfc-non-goals",children:"\ud83d\udeab RFC Non-goals"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:"TBD"}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"-prior-art",children:"\ud83d\uddff Prior Art"}),"\n",(0,n.jsxs)(r.p,{children:["A GraphQL client can choose to test the support by requesting a document with the specific feature and checking errors in response. However, this method requires a client to understand how a server can fail given a specific unsupported feature; how a server returns an error for an unknown syntax (",(0,n.jsx)(r.code,{children:"Syntax Error: Expected Name, found !"}),") is different from how a server returns an error for an unknown directive (",(0,n.jsx)(r.code,{children:'Unknown directive "defer".'}),"). So the status quo is not acceptable."]}),"\n",(0,n.jsx)(r.h2,{id:"related-issues",children:"Related Issues"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["Client Controlled Nullability: ",(0,n.jsx)(r.a,{href:"https://github.com/graphql/graphql-spec/pull/895",children:"https://github.com/graphql/graphql-spec/pull/895"})]}),"\n",(0,n.jsxs)(r.li,{children:["Fragment Arguments: ",(0,n.jsx)(r.a,{href:"https://github.com/graphql/graphql-spec/pull/865",children:"https://github.com/graphql/graphql-spec/pull/865"})]}),"\n",(0,n.jsxs)(r.li,{children:["Fragment Modularity: ",(0,n.jsx)(r.a,{href:"https://github.com/graphql/graphql-wg/pull/839",children:"https://github.com/graphql/graphql-wg/pull/839"})]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"-proposed-solution",children:"\ud83e\uddd1\u200d\ud83d\udcbb Proposed Solution"}),"\n",(0,n.jsx)(r.p,{children:"TBD"}),"\n",(0,n.jsx)(r.h3,{id:"option-a-extending-a-schema-for-schema-introspection",children:"Option A: Extending a schema for schema introspection"}),"\n",(0,n.jsxs)(r.p,{children:["We can add a new field ",(0,n.jsx)(r.code,{children:"__features"})," under the ",(0,n.jsx)(r.code,{children:"__Schema"})," type. ",(0,n.jsx)(r.code,{children:"__features"})," can return a list of features in some shape."]}),"\n",(0,n.jsxs)(r.h3,{id:"option-b-add-a-new-root-level-meta-field-next-to-__schema-and-__type",children:["Option B: Add a new root-level meta field next to ",(0,n.jsx)(r.code,{children:"__schema"})," and ",(0,n.jsx)(r.code,{children:"__type"})]}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"__feature"})," will take an argument for a feature name such as ",(0,n.jsx)(r.code,{children:"non-nullable-designator"})," and returns ",(0,n.jsx)(r.em,{children:"some info"})," or ",(0,n.jsx)(r.code,{children:"null"}),"."]}),"\n",(0,n.jsx)(r.h3,{id:"option-c-tbd",children:"Option C: TBD"}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,i.a)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},1151:(e,r,t)=>{t.d(r,{Z:()=>o,a:()=>a});var n=t(7294);const i={},s=n.createContext(i);function a(e){const r=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),n.createElement(s.Provider,{value:r},e.children)}}}]);