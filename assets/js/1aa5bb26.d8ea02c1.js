"use strict";(self.webpackChunk_localrepo_benjie_dev=self.webpackChunk_localrepo_benjie_dev||[]).push([[117],{6947:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>c});var s=t(5893),i=t(1151);const a={identifier:"FullSchemas",stage:"0",title:"Full Schemas",events:[{type:"docUpdated",date:new Date("2026-01-28T15:24:37.000Z"),href:"https://github.com/graphql/graphql-wg/blob/dded0a4ff41064d6989be427feea6fba77ce9b6e/rfcs/FullSchemas.md",actor:"Martin Bonnin"},{type:"docCreated",date:new Date("2023-08-26T09:15:53.000Z"),href:"https://github.com/graphql/graphql-wg/blob/297b11eabb3de0fff2457401ea147ecdb8228e24/rfcs/FullSchemas.md",actor:"Martin Bonnin"}],related:"1036, 1163, 300",shortname:"Full Schemas",image:"/img/rfc_tracker.png"},l=void 0,r={id:"FullSchemas",title:"Full Schemas",description:"At a glance",source:"@site/rfcs/FullSchemas.md",sourceDirName:".",slug:"/FullSchemas",permalink:"/rfcs/FullSchemas",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{identifier:"FullSchemas",stage:"0",title:"Full Schemas",events:[{type:"docUpdated",date:"2026-01-28T15:24:37.000Z",href:"https://github.com/graphql/graphql-wg/blob/dded0a4ff41064d6989be427feea6fba77ce9b6e/rfcs/FullSchemas.md",actor:"Martin Bonnin"},{type:"docCreated",date:"2023-08-26T09:15:53.000Z",href:"https://github.com/graphql/graphql-wg/blob/297b11eabb3de0fff2457401ea147ecdb8228e24/rfcs/FullSchemas.md",actor:"Martin Bonnin"}],related:"1036, 1163, 300",shortname:"Full Schemas",image:"/img/rfc_tracker.png"},sidebar:"rfcsSidebar",previous:{title:"GraphQL Response Mocking Specification",permalink:"/rfcs/MockSpec"},next:{title:"Status",permalink:"/rfcs/ClientControlledNullability"}},o={},c=[{value:"At a glance",id:"at-a-glance",level:2},{value:"Timeline",id:"timeline",level:2},{value:"Problem statement",id:"problem-statement",level:2},{value:"Proposal: be explicit about &quot;full schemas&quot; vs &quot;source schemas&quot;",id:"proposal-be-explicit-about-full-schemas-vs-source-schemas",level:2},{value:"Questions",id:"questions",level:2},{value:"Q: Why not always use introspection results?",id:"q-why-not-always-use-introspection-results",level:3},{value:"Q: Wouldn&#39;t that make inconsistent SDL documents containing unused definitions?",id:"q-wouldnt-that-make-inconsistent-sdl-documents-containing-unused-definitions",level:3}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"at-a-glance",children:"At a glance"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Identifier"}),": FullSchemas"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Stage"}),": ",(0,s.jsx)(n.a,{href:"https://github.com/graphql/graphql-spec/blob/main/CONTRIBUTING.md#stage-0-strawman",children:"RFC0: Strawman"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Champion"}),": -"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PR"}),": -"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Related"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/rfcs/1163",title:"Allow clients to disable error propagation via request parameter (take 2) / RFC1",children:"#1163"})," (Allow clients to disable error propagation via request parameter (take 2))"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"timeline",children:"Timeline"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://github.com/graphql/graphql-wg/blob/dded0a4ff41064d6989be427feea6fba77ce9b6e/rfcs/FullSchemas.md",children:"RFC document updated"})})," on 2026-01-28 by Martin Bonnin"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://github.com/graphql/graphql-wg/blob/297b11eabb3de0fff2457401ea147ecdb8228e24/rfcs/FullSchemas.md",children:"RFC document created"})})," on 2023-08-26 by Martin Bonnin"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.h1,{id:"rfc-full-schemas",children:"RFC: Full Schemas"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Proposed by:"})," ",(0,s.jsx)(n.a,{href:"https://mastodon.mbonnin.net/@mb",children:"Martin Bonnin"})," - Apollo"]}),"\n",(0,s.jsx)(n.h2,{id:"problem-statement",children:"Problem statement"}),"\n",(0,s.jsx)(n.p,{children:"In its current form the GraphQL specification contains language about the presence of built-in definitions in SDL schemas:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["scalars MUST be absent from SDL (",(0,s.jsx)(n.a,{href:"https://spec.graphql.org/October2021/#sel-GAHXJHABAB_D4G",children:"here"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["directives SHOULD be absent(",(0,s.jsx)(n.a,{href:"https://spec.graphql.org/October2021/#sel-FAHnBPLCAACCcooU",children:"here"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["introspection types are not mentioned in the spec (See ",(0,s.jsx)(n.a,{href:"https://github.com/graphql/graphql-spec/pull/1036",children:"here"})," for a pull request to address this)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This is made for brevity and correctness reasons. When the SDL document is fed to a GraphQL implementation like graphql-js, there is no need to add the built-in definitions as the implementation will add them. Adding built-in definitions in the input schema could also be confusing: what definition is used? The one from the input schema or the one from the implementation? It makes sense overall to omit built-in definitions from SDL documents that are used by GraphQL implementations."}),"\n",(0,s.jsx)(n.p,{children:"But the absence of built-in definitions can make it impossible for client tools to validate an operation without knowing more details about what is supported by the server."}),"\n",(0,s.jsxs)(n.p,{children:["For an example, the below query is valid if the server uses the latest draft but is not valid if the server uses the ",(0,s.jsx)(n.a,{href:"https://spec.graphql.org/October2021/#sel-GAJXNFADgHAADkHABsrC",children:"Oct2021 specification"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"{\n  __schema {\n    types {\n      name\n      inputFields {\n        name\n        # isDeprecated is only present in latest versions of the specification\n        isDeprecated\n        deprecationReason\n      }\n    }\n  }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"In general, it would be nice to have a SDL format that would be a full representation of the server schema, even if it means it is more verbose."}),"\n",(0,s.jsxs)(n.p,{children:["With the advent of ",(0,s.jsx)(n.a,{href:"https://github.com/graphql/graphql-spec/pull/1163",children:"service capabilities"}),', some SDL information is tied to the implementation and not to the type system. It makes sense to have "full schemas" contain this, but not too much in "source schemas"']}),"\n",(0,s.jsx)(n.p,{children:'This proposal is about allowing SDL documents that contain all the information required for tooling to validate any operation, later denominated as "full schema".'}),"\n",(0,s.jsx)(n.h2,{id:"proposal-be-explicit-about-full-schemas-vs-source-schemas",children:'Proposal: be explicit about "full schemas" vs "source schemas"'}),"\n",(0,s.jsx)(n.p,{children:'Introduce "full schemas" in addition to the existing SDL schemas. A "full schema" is a schema that also contains the built-in definitions and service capabilities added by the implementation.'}),"\n",(0,s.jsx)(n.h2,{id:"questions",children:"Questions"}),"\n",(0,s.jsx)(n.h3,{id:"q-why-not-always-use-introspection-results",children:"Q: Why not always use introspection results?"}),"\n",(0,s.jsx)(n.p,{children:"Introspection is the tool that was designed for clients to consume schemas, so it could be argued that client should use that. However:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Some servers have introspection disabled making it hard for clients to get an introspection schema"}),"\n",(0,s.jsx)(n.li,{children:"In general, SDL is a much more readable and concise representation than the introspection JSON, making it more suited for workflows where the file is read by humans (IDEs, codegen, etc...)"}),"\n",(0,s.jsxs)(n.li,{children:["SDL schemas can represent applied directives, which introspection can't (see ",(0,s.jsx)(n.a,{href:"https://github.com/graphql/graphql-spec/issues/300",children:"#300"}),"). Tools could use that information to provide a better developer experience, add functionality, etc..."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"q-wouldnt-that-make-inconsistent-sdl-documents-containing-unused-definitions",children:"Q: Wouldn't that make inconsistent SDL documents containing unused definitions?"}),"\n",(0,s.jsx)(n.p,{children:"There is a (unwritten?) rule that SDL definitions must all be used (with an exception for built-in scalars and directive definitions). Hence, adding the introspection types to SDL would result in this schema being valid:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"type Query {\n    random: String\n}\n\ntype __Schema { ... }\ntype __Type { ... }\nenum __TypeKind { ... }\ntype __Field { ... }\ntype __InputValue { ... }\ntype __EnumValue { ... }\ntype __Directive { ... }\nenum __DirectiveLocation { ... }\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Although technically nothing would use the ",(0,s.jsx)(n.code,{children:"__Schema"})," type. For this, we would need to add the ",(0,s.jsx)(n.code,{children:"__schema"})," meta-field:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"type Query {\n    random: String\n    __schema: __Schema\n}\n\n"})}),"\n",(0,s.jsx)(n.p,{children:"But then doing so for typename would become very noisy:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"type Foo {\n    # add __typename here\n    __typename: String!\n}\ntype Bar {\n    # and here as well\n    __typename: String!\n}\nunion SomeUnion = Foo | Bar {\n    # Technically unions have __typename, should we do this? \n    __typename: String!\n}\n\n"})}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>r,a:()=>l});var s=t(7294);const i={},a=s.createContext(i);function l(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);