<!doctype html>
<html lang="en-GB" dir="ltr" class="docs-wrapper plugin-docs plugin-id-rfcs docs-version-current docs-doc-page docs-doc-id-InputUnion" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">GraphQL Input Union | benjie.dev</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://benjie.dev/rfcs/InputUnion"><meta data-rh="true" property="og:locale" content="en_GB"><meta data-rh="true" name="docusaurus_locale" content="en-GB"><meta data-rh="true" name="docsearch:language" content="en-GB"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-rfcs-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-rfcs-current"><meta data-rh="true" property="twitter:title" content="GraphQL Input Union | benjie.dev"><meta data-rh="true" property="og:title" content="GraphQL Input Union | benjie.dev"><meta data-rh="true" name="description" content="At a glance"><meta data-rh="true" property="og:description" content="At a glance"><meta data-rh="true" property="og:image" content="https://benjie.dev/img/rfc_tracker.png"><meta data-rh="true" name="twitter:image" content="https://benjie.dev/img/rfc_tracker.png"><link data-rh="true" rel="icon" href="/favicon.ico"><link data-rh="true" rel="canonical" href="https://benjie.dev/rfcs/InputUnion"><link data-rh="true" rel="alternate" href="https://benjie.dev/rfcs/InputUnion" hreflang="en-GB"><link data-rh="true" rel="alternate" href="https://benjie.dev/rfcs/InputUnion" hreflang="x-default"><script src="https://assets.calendly.com/assets/external/widget.js"></script><link rel="stylesheet" href="/assets/css/styles.c47278a5.css">
<script src="/assets/js/runtime~main.e7a10dff.js" defer="defer"></script>
<script src="/assets/js/main.3cb411a3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/avatar.jpg" alt="benjie" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/avatar.jpg" alt="benjie" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">benjie.dev</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rfcs/">RFCs</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/book">📞 Book a call</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rfcs/">GraphQL RFC Tracker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rfcs/activity">Activity</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/rfcs/525">Stage 3: Accepted</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/rfcs/793">Stage 2: Draft</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/793">793*: Default value coercion rules [RFC2]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/825">825*: OneOf Input Objects [RFC2]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/860">860*: Prevent @skip and @include on root subscription selection set [RFC2]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/976">976*: Add &#x27;extensions&#x27; to request [RFC2]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/1053">1053*: Implementations may not deprecate a field that the interface hasn&#x27;t deprecated [RFC2]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/1063">1063*: Type system ordering of: object interfaces, directive arguments, input object fields, enum values [RFC2]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/1092">1092*: Recommend that order of unordered collections is maintained where possible [RFC2]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/1102">1102*: Define Data Collections used in the spec [RFC2]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/1081">1081: Fragment arguments/variables (syntax/validation/execution) [RFC2]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/794">794: Schema Coordinates [RFC2]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/955">955: Add validation rule that operation types exist [RFC2]</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/rfcs/1142">Stage 1: Proposal</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/1142">1142: make `includeDeprecated` non nullable [RFC1]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/1058">1058*: List coercion algorithm [RFC1]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/1056">1056*: Fix CoerceArgumentValues() hasValue [RFC1]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/1110">1110: Incremental Delivery spec draft [RFC1]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/1127">1127*: When `sourceStream` errors, yield a `{ errors: [...] }` response [RFC1]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/997">997: Expand @deprecated to Objects [RFC1]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/1059">1059*: Introduce Strict and Legacy All Variable Usages Are Allowed [RFC1]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/950">950: allow unions to include interfaces and unions [RFC1]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/939">939: allow unions to declare implementation of interfaces [RFC1]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/907">907: Add support for directives on directives [RFC1]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/892">892: Add descriptions to executable definitions [RFC1]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/509">509: Allow singular variables in list locations [RFC1]</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/rfcs/wg1700">Stage 0: Strawman</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/wg1700">wg1700: Lee&#x27;s new nullability &amp; error propagation proposal [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/DisableErrorPropagationDirective">DisableErrorPropagationDirective: Disable Error Propagation Directive [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/1050">1050*: Directive proposal for opting out of null bubbling [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/1065">1065*: SemanticNonNull type (null only on error) [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/SemanticNullability">SemanticNullability: Semantic Nullability [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/ClientControlledNullability">ClientControlledNullability: Client Controlled Nullability [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/1114">1114: add __directive meta field parallel to __type [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/1057">1057*: Fix coercion table for list [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/DeferStream">DeferStream: GraphQL Defer and Stream Directives [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/SchemaCoordinates">SchemaCoordinates: Schema Coordinates [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rfcs/InputUnion">InputUnion: GraphQL Input Union [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/FeatureDiscovery">FeatureDiscovery: Feature Discovery [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/Struct">Struct: Polymorphic-capable composite symmetric input/output type (`struct`) [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/1049">1049: Introduce SourceSchemaDocument and FullSchemaDocument [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/wg1410">wg1410: Strict Semantic Nullability [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/wg1394">wg1394: True Nullability Schema [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/1045">1045*: Remove fragmentSpreadName from visitedFragments when visit is complete [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/FullSchemas">FullSchemas: Full Schemas [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/1015">1015: &quot;Root&quot; Types clarity → &quot;Operation Type&quot; [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/FragmentArguments">FragmentArguments: Fragment Arguments [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/wg1239">wg1239: Fragment Arguments: RFC + Implementation Details [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/998">998: add spec edits for references [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/OptInFeatures">OptInFeatures: Opt-in features [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/ExpandingSubtyping">ExpandingSubtyping: Expanding Subtyping (for output types) [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/AnnotationStructs">AnnotationStructs: Annotation Structs [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/MetadataStructs">MetadataStructs: Metadata Structs [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/wg1096">wg1096: &quot;Metadata Directives&quot; Proposal [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/CompositeSchemas">CompositeSchemas: GraphQL Composite Schemas [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/wg1071">wg1071*: Struct type [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/673">673: Servers must preserve lexical ordering between SDL and introspection [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/948">948*: OneOf Objects [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/wg944">wg944: New Intersection Type [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/wg857">wg857: Fragment Modularity [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/FragmentModularity">FragmentModularity: Fragment Modularity [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/wg815">wg815: Nested GraphQL Mutations [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/ImplicitInheritance">ImplicitInheritance: Implicit Inheritance [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/OperationExpressions">OperationExpressions: Operation Expressions [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/SchemaFragments">SchemaFragments: Schema Fragments [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/879">879: __fulfilled meta field [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/Subscriptions">Subscriptions: NOTE: this document is kept for historic purposes; GraphQL Subscriptions have been specified and released as part of the official [June 2018 GraphQL Specification](https://spec.graphql.org/June2018/). [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/710">710: Add namedType and punctuatedName to __Type [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/706">706: Add support for directives for an object field name [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/674">674: allow empty selections [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/631">631: Make root query operation type optional [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/567">567: allow directives on directive definitions [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/556">556: Document Directives [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/521">521: Scalar serialize as built-in scalar type [RFC0]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rfcs/325">325: Add &quot;Any&quot; scalar type [RFC0]</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/rfcs/1091">Stage X: Rejected</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>GraphQL Input Union</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="at-a-glance">At a glance<a href="#at-a-glance" class="hash-link" aria-label="Direct link to At a glance" title="Direct link to At a glance">​</a></h2>
<ul>
<li><strong>Identifier</strong>: InputUnion</li>
<li><strong>Stage</strong>: <a href="https://github.com/graphql/graphql-spec/blob/main/CONTRIBUTING.md#stage-0-strawman" target="_blank" rel="noopener noreferrer">RFC0: Strawman</a></li>
<li><strong>Champion</strong>: -</li>
<li><strong>PR</strong>: -</li>
<li><strong>Related</strong>:<!-- -->
<ul>
<li><a title="inputUnion type / RFCX" href="/rfcs/395">#395</a> (inputUnion type)</li>
<li><a title="Input Objects accepting exactly @oneField / RFCX" href="/rfcs/586">#586</a> (Input Objects accepting exactly @oneField)</li>
<li><a title="Tagged type / RFCX" href="/rfcs/733">#733</a> (Tagged type)</li>
<li><a title="Polymorphic-capable composite symmetric input/output type (`struct`) / RFC0" href="/rfcs/Struct">Struct</a> (Polymorphic-capable composite symmetric input/output type (`struct`))</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="timeline">Timeline<a href="#timeline" class="hash-link" aria-label="Direct link to Timeline" title="Direct link to Timeline">​</a></h2>
<ul>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/ca0fc775c66ae0e31c4ed605503a2679d9390705/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2023-11-28 by Benjie Gillam</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/5bfb8d590cc9693db1149b547d8db5041f05b731/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2023-11-28 by Benjie Gillam</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/8079f5885f03f78a5910a6a5bdeaea063f9a3184/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2021-09-03 by Lee Byron</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/f520be18cc7794d6179f7c6e126b45085f273f1f/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2021-09-02 by Ivan Goncharov</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/34c8f9d377e4338088a85389127a3cd6ea1ec792/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2021-09-02 by ericvergnaud</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/bfcb1dd76e6095e95bcf92f4a835bea49bcd40c1/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2021-04-05 by Lee Byron</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/fe76b61dfb8ece0de95fcf24bf2a65a4c74d8bac/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2020-11-18 by Evan Huus</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/9ac6a4d8fceb2d65b4ac0e2468e7fc5e5fd4110e/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2020-11-04 by Benjie Gillam</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/d167baa69421602a4ace5fd1c24421f04b3a9fd6/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2020-09-30 by Dan Freeman</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/52af70230eb2f69f9e92771f748608e71e038856/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2020-07-02 by Joel Turkel</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/74b2f825f715e3fee8b5a9acc42b4cc251a0d2c2/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2020-06-25 by Valeriy Protopopov</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/c6026ac020a8017ae509d3b6dd880f1972c73c10/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2020-06-12 by Benedikt Franke</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/239e5a00fd7e6f4fcc406fd0842ab1b83eef0608/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2020-06-11 by Benedikt Franke</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/1411a148fdb398345c84cd0a6e3e4dd1008f2ce8/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2020-06-11 by Benedikt Franke</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/d59706e2dea6a4e61f65adacd96a2957f0123cdb/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2020-05-28 by Lee Byron</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/0d28b7a1137b1bbfd804cb3cd7d8e848e9129749/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2020-05-08 by Blake Gentry</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/9e39f96b35f8c8535391c4d84a7098dc1349f533/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2020-04-30 by Lee Byron</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/2d32eb03011dfe07be1ceaea4c6ae40c008ad4ff/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2020-04-01 by Vince Foley</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/c5660e12f39cfda7db320e3f3094c17d1491a40a/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2020-03-05 by Vince Foley</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/59feb21984d39e4f69cd4eda25d60a2dceb120c5/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2020-03-05 by Vince Foley</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/fb1914a736bfcc141624395e2e508730bdbec340/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2020-02-06 by Lee Byron</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/a30859f5cc1c48aa7a2808bbeb068d2db40aa68a/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2020-01-31 by Benjie Gillam</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/798432aaa5e67e51b51ca0e4d4d85a76f6fcd2fc/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2020-01-25 by Benjie Gillam</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/1c2d54263073a1b7dcc295331e056565417150f2/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2020-01-09 by Vince Foley</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/bf2762820b9f74fca56af7513a87396df18bdb00/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2019-12-17 by Benjie Gillam</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/cbfa5ba8cca8a69e3ad362c26377132e4b0629d1/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2019-12-11 by Benjie Gillam</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/784e21e989143ef5fda7b5d57e37c3b8e8cdd61d/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2019-12-04 by Benjie Gillam</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/8157175faa2cb84a5c95bac552d1411958671433/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2019-11-28 by Vince Foley</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/c8ffbf737fdaeb0389ec729fbbf0845cae5294f2/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2019-11-26 by Benedikt Franke</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/638542f54333c0ae9216fb723fc1c2f16d6941d8/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2019-11-11 by Benjie Gillam</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/60183a9c292ef539d3c25ffc1d0a59d70c03a52a/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2019-11-11 by Vince Foley</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/14e67c157a0ce69d7ccbb32c3fb0b18234b8ce21/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2019-11-11 by Vince Foley</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/a8d19cb7649bc2c59be4a10926dc47180dd23981/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2019-11-11 by Vince Foley</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/fb3564a8f452624ea40df934c57d6700027dc6e4/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2019-11-09 by Evan Huus</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/d6638c5582ef3b1ef7a55b79b7b129b77c5f6dbc/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2019-11-09 by Evan Huus</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/4c56e078bca09eab57a847fb2db06056988a0f03/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2019-11-07 by Lee Byron</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/b19481ca4fb6bbd868d10746f161011813bd4dc2/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2019-10-22 by Benjie Gillam</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/901e3cf8d6a90f972a0cf0252c5f852c5482a736/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2019-10-21 by Vince Foley</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/630fc469b2271d923a9279743215fe02b29cbc30/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2019-10-14 by Vince Foley</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/5a1513230feceac0926ec96c82d9232c549a8a90/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2019-10-05 by Benjie Gillam</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/f3dd4d7f4af124f4aa918c106cc83e8aea19ca7f/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2019-10-03 by Ivan Goncharov</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/48c84db3ee157d4fc26d0af174f13d2f4bbbb3e9/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2019-10-03 by Vince Foley</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/41c27b549a0f5113524a245c70de9e3af9b97ad8/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2019-10-01 by Vince Foley</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/c187e9cc6ebbf3b3f630f6f693c1f503f01bf3d8/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2019-09-19 by Vince Foley</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/1dcaf7aea25b86b2e0542e72cb5c4feb979a8554/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document updated</a></strong> on 2019-09-15 by Vince Foley</li>
<li><strong><a href="https://github.com/graphql/graphql-wg/blob/4868aa41cc940ce9e47d0eae588118411afb112b/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">RFC document created</a></strong> on 2019-06-20 by Vince Foley</li>
</ul>
<hr>
<blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="rfc-graphql-input-union">RFC: GraphQL Input Union<a href="#rfc-graphql-input-union" class="hash-link" aria-label="Direct link to RFC: GraphQL Input Union" title="Direct link to RFC: GraphQL Input Union">​</a></h2>
<p>The addition of an Input Union type has been discussed in the GraphQL community for many years now. The value of this feature has largely been agreed upon, but the implementation has not.</p>
<p>This document attempts to bring together all the various solutions and perspectives that have been discussed with the goal of reaching a shared understanding of the problem space.</p>
<p>From that shared understanding, the GraphQL Working Group aims to reach a consensus on how to address the proposal.</p>
<p>Notes from the 2020/5/28 meeting: <a href="https://gist.github.com/leebyron/f7f9d81c7ca5259357fab5d82a4c0621" target="_blank" rel="noopener noreferrer">https://gist.github.com/leebyron/f7f9d81c7ca5259357fab5d82a4c0621</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="contributing">Contributing<a href="#contributing" class="hash-link" aria-label="Direct link to Contributing" title="Direct link to Contributing">​</a></h3>
<p>To help bring this idea to reality, you can contribute <a href="https://github.com/graphql/graphql-wg/edit/main/rfcs/InputUnion.md" target="_blank" rel="noopener noreferrer">PRs to this RFC document.</a></p>
<h1>📜 Problem Statement</h1>
<p>GraphQL currently provides polymorphic types that enable schema authors to model complex <strong>Object</strong> types that have multiple shapes while remaining type-safe, but lacks an equivilant capability for <strong>Input</strong> types.</p>
<p>Over the years there have been numerous proposals from the community to add a polymorphic input type. Without such a type, schema authors have resorted to a handful of work-arounds to model their domains. These work-arounds have led to schemas that aren&#x27;t as expressive as they could be, and schemas where mutations that ideally mirror queries are forced to be modeled differently.</p>
<h1>🐕 Problem Sketch</h1>
<p>To understand the problem space a little more, we&#x27;ll sketch out an example that explores a domain from the perspective of a Query and a Mutation. However, it&#x27;s important to note that the problem is not limited to mutations, since <code>Input</code> types are used in field arguments for any GraphQL operation type.</p>
<p>Let&#x27;s imagine an animal shelter for our example. When querying for a list of the animals, it&#x27;s easy to see how abstract types are useful - we can get data specific to the type of the animal easily.</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property-query">animalShelter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Portland, OR&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token object">animals</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">__typename</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">age</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">Cat</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">livesLeft</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">Dog</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">breed</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">Snake</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">venom</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>However, when we want to submit data, we can&#x27;t use an <code>interface</code> or <code>union</code>, so we must model around that.</p>
<p>One technique commonly used to is a <strong>tagged union</strong> pattern. This essentially boils down to a &quot;wrapper&quot; input that isolates each type into its own field. The field name takes on the convention of representing the type.</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">mutation</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property-query property-mutation property-mutation">logAnimalDropOff</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token description string" style="color:#e3116c">&quot;</span><span class="token description string language-markdown" style="color:#e3116c">Portland, OR</span><span class="token description string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">animals</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">cat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Buster&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">livesLeft</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Unfortunately, this opens up a set of problems, since the Tagged union input type actually contains many fields, any of which could be submitted.</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token atom-input class-name">AnimalDropOffInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">cat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token atom-input class-name">CatInput</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">dog</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token atom-input class-name">DogInput</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">snake</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token atom-input class-name">SnakeInput</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This allows nonsensical mutations to pass GraphQL validation, for example representing an animal that is both a <code>Cat</code> and a <code>Dog</code>.</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">mutation</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property-query property-mutation property-mutation">logAnimalDropOff</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token description string" style="color:#e3116c">&quot;</span><span class="token description string language-markdown" style="color:#e3116c">Portland, OR</span><span class="token description string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">animals</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token attr-name" style="color:#00a4db">cat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Buster&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">livesLeft</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token attr-name" style="color:#00a4db">dog</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Ripple&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">breed</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">WHIPPET</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In addition, relying on this layer of abstraction means that this domain must be modelled differently across input &amp; output. This can put a larger burden on the developer interacting with the schema, both in terms of lines of code and complexity.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// JSON structure returned from a query</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;animals&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;__typename&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Cat&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Ruby&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;age&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;livesLeft&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;__typename&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Snake&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Monty&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;age&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">13</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;venom&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;POISON&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// JSON structure submitted to a mutation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;animals&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;cat&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Ruby&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;age&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;livesLeft&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;snake&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Monty&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;age&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">13</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;venom&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;POISON&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Another approach is to use an input type with a discriminator and input fields for all possible member types.</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">mutation</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property-query property-mutation property-mutation">logAnimalDropOff</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token description string" style="color:#e3116c">&quot;</span><span class="token description string language-markdown" style="color:#e3116c">Portland, OR</span><span class="token description string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">animals</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">CAT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Buster&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">livesLeft</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">DOG</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Ripple&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">breed</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">WHIPPET</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token atom-input class-name">AnimalDropOffInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">AnimalType</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">breed</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">DogBreed</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># only applies when type = DOG</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">livesLeft</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># only applies when type = CAT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">venom</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">VenomType</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># only applies when type = SNAKE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This results in more consistent modeling between input &amp; output but still allows nonsensical inputs to pass GraphQL validation.</p>
<p>Another common approach is to provide a unique mutation for every type. A schema employing this technique might have <code>logCatDropOff</code>, <code>logDogDropOff</code> and <code>logSnakeDropOff</code> mutations. This removes the potential for modeling non-sensical situations, but it explodes the number of mutations in a schema, making the schema less accessible. If the type is nested inside other inputs, this approach simply isn&#x27;t feasable.</p>
<p>These workarounds only get worse at scale. Real world GraphQL schemas can have dozens if not hundreds of possible types for a single <code>Interface</code> or <code>Union</code>.</p>
<p>The goal of the <strong>Input Union</strong> is to bring a polymorphic type to Inputs. This would enable us to model situations where an input may be of different types in a type-safe and elegant manner, like we can with outputs.</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">mutation</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property-query property-mutation property-mutation">logAnimalDropOff</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Portland, OR&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Problem: we need to determine the type of each Animal</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">animals</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># This is meant to be a CatInput</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Buster&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">livesLeft</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># This is meant to be a DogInput</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Ripple&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this mutation, we encounter the main challenge of the <strong>Input Union</strong> - we need to determine the correct type of the data submitted.</p>
<p>A wide variety of solutions have been explored by the community, and they are outlined in detail in this document under <a href="#Possible-Solutions">Possible Solutions</a>.</p>
<h1>🎨 Prior Art</h1>
<p>Many other technologies provide polymorphic types, and have done so using a variety of techniques.</p>
<table><thead><tr><th>Tech</th><th>Type</th><th>Read</th><th>Write</th></tr></thead><tbody><tr><td>GraphQL</td><td><a href="https://graphql.github.io/graphql-spec/June2018/#sec-Unions" target="_blank" rel="noopener noreferrer">Union</a></td><td>✅</td><td>❌</td></tr><tr><td>Protocol Buffers</td><td><a href="https://developers.google.com/protocol-buffers/docs/proto3#oneof" target="_blank" rel="noopener noreferrer">Oneof</a></td><td>✅</td><td>✅</td></tr><tr><td>FlatBuffers</td><td><a href="https://google.github.io/flatbuffers/flatbuffers_guide_writing_schema.html" target="_blank" rel="noopener noreferrer">Union</a></td><td>✅</td><td>✅</td></tr><tr><td>Cap&#x27;n Proto</td><td><a href="https://capnproto.org/language.html#unions" target="_blank" rel="noopener noreferrer">Union</a></td><td>✅</td><td>✅</td></tr><tr><td>Thrift</td><td><a href="https://thrift.apache.org/docs/idl#union" target="_blank" rel="noopener noreferrer">Union</a></td><td>✅</td><td>✅</td></tr><tr><td>Arvo</td><td><a href="https://avro.apache.org/docs/current/spec.html#Unions" target="_blank" rel="noopener noreferrer">Union</a></td><td>✅</td><td>✅</td></tr><tr><td>OpenAPI 3</td><td><a href="https://swagger.io/docs/specification/data-models/oneof-anyof-allof-not/" target="_blank" rel="noopener noreferrer">oneOf</a></td><td>✅</td><td>✅</td></tr><tr><td>JSON Schema</td><td><a href="https://json-schema.org/understanding-json-schema/reference/combining.html#oneof" target="_blank" rel="noopener noreferrer">oneOf</a></td><td>✅</td><td>✅</td></tr><tr><td>Typescript</td><td><a href="http://www.typescriptlang.org/docs/handbook/advanced-types.html#union-types" target="_blank" rel="noopener noreferrer">Union</a></td><td>✅</td><td>✅</td></tr><tr><td>Typescript</td><td><a href="http://www.typescriptlang.org/docs/handbook/advanced-types.html#discriminated-unions" target="_blank" rel="noopener noreferrer">Discriminated Union</a></td><td>✅</td><td>✅</td></tr><tr><td>Rust</td><td><a href="https://doc.rust-lang.org/rust-by-example/custom_types/enum.html" target="_blank" rel="noopener noreferrer">Enum</a></td><td>✅</td><td>✅</td></tr><tr><td>Swift</td><td><a href="https://docs.swift.org/swift-book/LanguageGuide/Enumerations.html" target="_blank" rel="noopener noreferrer">Enumeration</a></td><td>✅</td><td>✅</td></tr><tr><td>Haskell</td><td><a href="http://learnyouahaskell.com/making-our-own-types-and-typeclasses" target="_blank" rel="noopener noreferrer">Algebraic data types</a></td><td>✅</td><td>✅</td></tr></tbody></table>
<p>The topic has also been extensively explored in Computer Science more generally.</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Algebraic_data_type" target="_blank" rel="noopener noreferrer">Wikipedia: Algebraic data type</a></li>
<li><a href="https://en.wikipedia.org/wiki/Union_type" target="_blank" rel="noopener noreferrer">Wikipedia: Union type</a></li>
<li><a href="https://en.wikipedia.org/wiki/Tagged_union" target="_blank" rel="noopener noreferrer">Wikipedia: Tagged Union</a></li>
<li><a href="http://wiki.c2.com/?NominativeAndStructuralTyping" target="_blank" rel="noopener noreferrer">C2 Wiki: Nominative And Structural Typing</a></li>
</ul>
<p>There are also libraries that mimic this functionality in GraphQL:</p>
<ul>
<li><a href="https://github.com/Cardinal90/graphql-union-input-type" target="_blank" rel="noopener noreferrer">graphql-union-input-type</a></li>
</ul>
<h1>🛠 Use Cases</h1>
<p>There have been a variety of use cases described by users asking for an abstract input type.</p>
<ul>
<li><a href="https://github.com/graphql/graphql-spec/pull/395#issuecomment-489495267" target="_blank" rel="noopener noreferrer">Observability Metrics</a></li>
<li><a href="https://github.com/graphql/graphql-js/issues/207#issuecomment-228543259" target="_blank" rel="noopener noreferrer">Login Options</a></li>
<li><a href="https://github.com/graphql/graphql-spec/pull/395#issuecomment-489611199" target="_blank" rel="noopener noreferrer">Abstract Syntax Tree</a></li>
<li><a href="https://github.com/graphql/graphql-js/issues/207#issuecomment-308344371" target="_blank" rel="noopener noreferrer">Content Widgets</a></li>
<li><a href="https://github.com/graphql/graphql-spec/issues/202#issue-170560819" target="_blank" rel="noopener noreferrer">Filtering</a></li>
<li><a href="https://gist.github.com/binaryseed/f2dd63d1a1406124be70c17e2e796891#cloud-integrations" target="_blank" rel="noopener noreferrer">Observability Cloud Integrations</a></li>
<li><a href="https://gist.github.com/binaryseed/f2dd63d1a1406124be70c17e2e796891#dashboards" target="_blank" rel="noopener noreferrer">Observability Dashboards</a></li>
</ul>
<h1>📋 Solution Criteria</h1>
<p>This section sketches out the potential goals that a solution might attempt to fulfill. These goals will be evaluated with the <a href="https://github.com/graphql/graphql-spec/blob/main/CONTRIBUTING.md#guiding-principles" target="_blank" rel="noopener noreferrer">GraphQL Spec Guiding Principles</a> in mind:</p>
<ul>
<li>Backwards compatibility</li>
<li>Performance is a feature</li>
<li>Favor no change</li>
<li>Enable new capabilities motivated by real use cases</li>
<li>Simplicity and consistency over expressiveness and terseness</li>
<li>Preserve option value</li>
<li>Understandability is just as important as correctness</li>
</ul>
<p>Each criteria is identified with a <code>Letter</code> so they can be referenced in the rest of the document. New criteria must be added to the end of the list.</p>
<p>Solutions are evaluated and scored using a simple 3 part scale. A solution may have multiple evaluations based on variations present in the solution.</p>
<ul>
<li>✅ <strong>Pass.</strong> The solution clearly meets the criteria</li>
<li>⚠️ <strong>Warning.</strong> The solution doesn&#x27;t clearly meet or fail the criteria, or there is an important caveat to passing the criteria</li>
<li>🚫 <strong>Fail.</strong> The solution clearly fails the criteria</li>
<li>❔ The criteria hasn&#x27;t been evaluated yet</li>
</ul>
<p>Passing or failing a specific criteria is NOT the final word. Both the Criteria <em>and</em> the Solutions are up for debate.</p>
<p>Criteria have been given a &quot;score&quot; according to their relative importance in solving the problem laid out in this RFC while adhering to the GraphQL Spec Guiding Principles. The scores are:</p>
<ul>
<li>🥇 Gold - A must-have</li>
<li>🥈 Silver - A nice-to-have</li>
<li>🥉 Bronze - Not necessary</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-a-graphql-should-contain-a-polymorphic-input-type">🎯 A. GraphQL should contain a polymorphic Input type<a href="#-a-graphql-should-contain-a-polymorphic-input-type" class="hash-link" aria-label="Direct link to 🎯 A. GraphQL should contain a polymorphic Input type" title="Direct link to 🎯 A. GraphQL should contain a polymorphic Input type">​</a></h2>
<p>The premise of this RFC - GraphQL should contain a polymorphic Input type.</p>
<table><thead><tr><th><a href="#-1-explicit-__typename-discriminator-field">1</a></th><th><a href="#-2-explicit-configurable-discriminator-field">2</a></th><th><a href="#-3-order-based-discrimination">3</a></th><th><a href="#-4-structural-uniqueness">4</a></th><th><a href="#-5-one-of-tagged-union">5</a></th><th><a href="#-6-pending">6</a></th><th><a href="#-7-tagged-type">7</a></th></tr></thead><tbody><tr><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>❔</td><td>✅</td></tr></tbody></table>
<p>Criteria score: 🥇</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-b-input-polymorphism-matches-output-polymorphism">🎯 B. Input polymorphism matches output polymorphism<a href="#-b-input-polymorphism-matches-output-polymorphism" class="hash-link" aria-label="Direct link to 🎯 B. Input polymorphism matches output polymorphism" title="Direct link to 🎯 B. Input polymorphism matches output polymorphism">​</a></h2>
<p>Any data structure that can be modeled with output type polymorphism should be able to be mirrored with Input polymorphism. Minimal transformation of outputs should be required to send a data structure back as inputs.</p>
<ul>
<li>✂️ Objection: composite input types and composite output types are distinct. Fields on composite output types support aliases and arguments whereas fields on composite input types do not. Marking an output field as non-nullable is a non-breaking change, but marking an input field as non-nullable is a breaking change.</li>
</ul>
<table><thead><tr><th><a href="#-1-explicit-__typename-discriminator-field">1</a></th><th><a href="#-2-explicit-configurable-discriminator-field">2</a></th><th><a href="#-3-order-based-discrimination">3</a></th><th><a href="#-4-structural-uniqueness">4</a></th><th><a href="#-5-one-of-tagged-union">5</a></th><th><a href="#-6-pending">6</a></th><th><a href="#-7-tagged-type">7</a></th></tr></thead><tbody><tr><td>✅⚠️</td><td>✅</td><td>✅</td><td>✅⚠️</td><td>🚫</td><td>❔</td><td>✅⚠️</td></tr></tbody></table>
<p>Criteria score: 🥇</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-c-doesnt-inhibit-schema-evolution">🎯 C. Doesn&#x27;t inhibit schema evolution<a href="#-c-doesnt-inhibit-schema-evolution" class="hash-link" aria-label="Direct link to 🎯 C. Doesn&#x27;t inhibit schema evolution" title="Direct link to 🎯 C. Doesn&#x27;t inhibit schema evolution"> ​</a></h2>
<p>The GraphQL specification mentions the ability to evolve your schema as one of its core values:
<a href="https://graphql.github.io/graphql-spec/draft/#sec-Validation.Type-system-evolution" target="_blank" rel="noopener noreferrer">https://graphql.github.io/graphql-spec/draft/#sec-Validation.Type-system-evolution</a></p>
<p>Adding a new member type to an Input Union or doing any non-breaking change to existing member types does not result in breaking change. For example, adding a new optional field to member type or changing a field from non-nullable to nullable does not break previously valid client operations.</p>
<table><thead><tr><th><a href="#-1-explicit-__typename-discriminator-field">1</a></th><th><a href="#-2-explicit-configurable-discriminator-field">2</a></th><th><a href="#-3-order-based-discrimination">3</a></th><th><a href="#-4-structural-uniqueness">4</a></th><th><a href="#-5-one-of-tagged-union">5</a></th><th><a href="#-6-pending">6</a></th><th><a href="#-7-tagged-type">7</a></th></tr></thead><tbody><tr><td>✅</td><td>✅⚠️</td><td>🚫</td><td>⚠️</td><td>✅</td><td>❔</td><td>✅</td></tr></tbody></table>
<p>Criteria score: 🥇</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-d-any-member-type-restrictions-are-validated-in-schema">🎯 D. Any member type restrictions are validated in schema<a href="#-d-any-member-type-restrictions-are-validated-in-schema" class="hash-link" aria-label="Direct link to 🎯 D. Any member type restrictions are validated in schema" title="Direct link to 🎯 D. Any member type restrictions are validated in schema">​</a></h2>
<p>If a solution places any restrictions on member types, compliance with these restrictions should be fully validated during schema building (analagous to how interfaces enforce restrictions on member types).</p>
<table><thead><tr><th><a href="#-1-explicit-__typename-discriminator-field">1</a></th><th><a href="#-2-explicit-configurable-discriminator-field">2</a></th><th><a href="#-3-order-based-discrimination">3</a></th><th><a href="#-4-structural-uniqueness">4</a></th><th><a href="#-5-one-of-tagged-union">5</a></th><th><a href="#-6-pending">6</a></th><th><a href="#-7-tagged-type">7</a></th></tr></thead><tbody><tr><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>❔</td><td>✅</td></tr></tbody></table>
<p>Criteria score: 🥇</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-e-a-member-type-may-be-a-leaf-type">🎯 E. A member type may be a Leaf type<a href="#-e-a-member-type-may-be-a-leaf-type" class="hash-link" aria-label="Direct link to 🎯 E. A member type may be a Leaf type" title="Direct link to 🎯 E. A member type may be a Leaf type">​</a></h2>
<p>In addition to containing Input types, member type may also contain Leaf types like <code>Scalar</code>s or <code>Enum</code>s.</p>
<ul>
<li>✂️ Objection: multiple Leaf types serialize the same way, making it impossible to distinguish the type without additional information. For example, a <code>String</code>, <code>ID</code> and <code>Enum</code>.<!-- -->
<ul>
<li>Potential solution: only allow a single built-in leaf type per input union.</li>
</ul>
</li>
<li>✂️ Objection: Output polymorphism is restricted to Object types only. Supporting Leaf types in Input polymorphism would create a new inconsistency.</li>
</ul>
<table><thead><tr><th><a href="#-1-explicit-__typename-discriminator-field">1</a></th><th><a href="#-2-explicit-configurable-discriminator-field">2</a></th><th><a href="#-3-order-based-discrimination">3</a></th><th><a href="#-4-structural-uniqueness">4</a></th><th><a href="#-5-one-of-tagged-union">5</a></th><th><a href="#-6-pending">6</a></th><th><a href="#-7-tagged-type">7</a></th></tr></thead><tbody><tr><td>🚫</td><td>🚫</td><td>✅⚠️</td><td>🚫</td><td>✅</td><td>❔</td><td>✅</td></tr></tbody></table>
<p>Criteria score: 🥉</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-f-migrating-a-field-to-a-polymorphic-input-type-is-non-breaking">🎯 F. Migrating a field to a polymorphic input type is non-breaking<a href="#-f-migrating-a-field-to-a-polymorphic-input-type-is-non-breaking" class="hash-link" aria-label="Direct link to 🎯 F. Migrating a field to a polymorphic input type is non-breaking" title="Direct link to 🎯 F. Migrating a field to a polymorphic input type is non-breaking">​</a></h2>
<p>Since the input object type is now a member of the input union, existing input objects being sent through should remain valid.</p>
<p>Example: Relay Mutation</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># From</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">I</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># To (pseudocode)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">union</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">IU</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">I</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">y</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>✂️ Objection: achieving this by indicating the default in the union (either explicitly or implicitly via the order) is undesirable as it may require​ multiple equivalent unions being created where only the default differs.</li>
<li>✂️ Objection: Numerous changes to a schema currently introduce breaking changes. The possibility of a breaking change isn&#x27;t a breaking change and shouldn&#x27;t prevent a polymorphic input type from existing.</li>
</ul>
<table><thead><tr><th><a href="#-1-explicit-__typename-discriminator-field">1</a></th><th><a href="#-2-explicit-configurable-discriminator-field">2</a></th><th><a href="#-3-order-based-discrimination">3</a></th><th><a href="#-4-structural-uniqueness">4</a></th><th><a href="#-5-one-of-tagged-union">5</a></th><th><a href="#-6-pending">6</a></th><th><a href="#-7-tagged-type">7</a></th></tr></thead><tbody><tr><td>✅⚠️</td><td>✅⚠️</td><td>✅</td><td>⚠️</td><td>🚫</td><td>❔</td><td>🚫</td></tr></tbody></table>
<p>Criteria score: 🥉</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-g-input-unions-may-include-other-input-unions">🎯 G. Input unions may include other input unions<a href="#-g-input-unions-may-include-other-input-unions" class="hash-link" aria-label="Direct link to 🎯 G. Input unions may include other input unions" title="Direct link to 🎯 G. Input unions may include other input unions">​</a></h2>
<p>To ease development.</p>
<ul>
<li>✂️ Objection: Adds complexity without enabling any new use cases.</li>
</ul>
<table><thead><tr><th><a href="#-1-explicit-__typename-discriminator-field">1</a></th><th><a href="#-2-explicit-configurable-discriminator-field">2</a></th><th><a href="#-3-order-based-discrimination">3</a></th><th><a href="#-4-structural-uniqueness">4</a></th><th><a href="#-5-one-of-tagged-union">5</a></th><th><a href="#-6-pending">6</a></th><th><a href="#-7-tagged-type">7</a></th></tr></thead><tbody><tr><td>❔</td><td>❔</td><td>❔</td><td>❔</td><td>✅</td><td>❔</td><td>✅</td></tr></tbody></table>
<p>Criteria score: X (not considered)</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-h-input-unions-should-accept-plain-data">🎯 H. Input unions should accept plain data<a href="#-h-input-unions-should-accept-plain-data" class="hash-link" aria-label="Direct link to 🎯 H. Input unions should accept plain data" title="Direct link to 🎯 H. Input unions should accept plain data">​</a></h2>
<p>Clients should be able to pass &quot;natural&quot; input data to unions without specially formatting it or adding extra metadata.</p>
<p>In other words: data should require​ minimal or no transformation and metadata over the wire</p>
<ul>
<li>✂️ Objection: This is a matter of taste - legitimate <a href="#-prior-art">Prior Art</a> exists that require​ formatting / extra metadata.</li>
</ul>
<table><thead><tr><th><a href="#-1-explicit-__typename-discriminator-field">1</a></th><th><a href="#-2-explicit-configurable-discriminator-field">2</a></th><th><a href="#-3-order-based-discrimination">3</a></th><th><a href="#-4-structural-uniqueness">4</a></th><th><a href="#-5-one-of-tagged-union">5</a></th><th><a href="#-6-pending">6</a></th><th><a href="#-7-tagged-type">7</a></th></tr></thead><tbody><tr><td>⚠️</td><td>⚠️</td><td>✅</td><td>✅</td><td>⚠️</td><td>❔</td><td>⚠️</td></tr></tbody></table>
<p>Criteria score: 🥉</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-i-input-unions-should-be-easy-to-upgrade-from-existing-solutions">🎯 I. Input unions should be easy to upgrade from existing solutions<a href="#-i-input-unions-should-be-easy-to-upgrade-from-existing-solutions" class="hash-link" aria-label="Direct link to 🎯 I. Input unions should be easy to upgrade from existing solutions" title="Direct link to 🎯 I. Input unions should be easy to upgrade from existing solutions">​</a></h2>
<p>Many people in the wild are solving the need for input unions with validation at run-time (e.g. using the &quot;tagged union&quot; pattern). Formalising support for these existing patterns in a non-breaking way would enable existing schemas to become retroactively more type-safe.</p>
<p>Note: This criteria is similar to  <a href="#-f-migrating-a-field-to-a-polymorphic-input-type-is-non-breaking">F. Migrating a field to a polymorphic input type is non-breaking</a></p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># From</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">I</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">y</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># To (pseudocode)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">union</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">IU</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">y</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>✂️ Objection: The addition of a polymorphic input type shouldn&#x27;t depend on the ability to change the type of an existing field or an existing usage pattern. One can always add new fields that leverage new features.</li>
<li>✂️ Objection: May break variable names? Only avoided with care</li>
<li>✂️ Objection: There are different ways people are working around the lack of input unions so it likely won&#x27;t be feasible to come up with a non-breaking migration path for all of them.</li>
</ul>
<table><thead><tr><th><a href="#-1-explicit-__typename-discriminator-field">1</a></th><th><a href="#-2-explicit-configurable-discriminator-field">2</a></th><th><a href="#-3-order-based-discrimination">3</a></th><th><a href="#-4-structural-uniqueness">4</a></th><th><a href="#-5-one-of-tagged-union">5</a></th><th><a href="#-6-pending">6</a></th><th><a href="#-7-tagged-type">7</a></th></tr></thead><tbody><tr><td>✅</td><td>✅</td><td>✅</td><td>⚠️</td><td>✅</td><td>❔</td><td>✅</td></tr></tbody></table>
<p>Criteria score: 🥉</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-j-a-graphql-schema-that-supports-input-unions-can-be-queried-by-older-graphql-clients">🎯 J. A GraphQL schema that supports input unions can be queried by older GraphQL clients<a href="#-j-a-graphql-schema-that-supports-input-unions-can-be-queried-by-older-graphql-clients" class="hash-link" aria-label="Direct link to 🎯 J. A GraphQL schema that supports input unions can be queried by older GraphQL clients" title="Direct link to 🎯 J. A GraphQL schema that supports input unions can be queried by older GraphQL clients">​</a></h2>
<p>Preferably without a loss of or change in previously supported functionality.</p>
<table><thead><tr><th><a href="#-1-explicit-__typename-discriminator-field">1</a></th><th><a href="#-2-explicit-configurable-discriminator-field">2</a></th><th><a href="#-3-order-based-discrimination">3</a></th><th><a href="#-4-structural-uniqueness">4</a></th><th><a href="#-5-one-of-tagged-union">5</a></th><th><a href="#-6-pending">6</a></th><th><a href="#-7-tagged-type">7</a></th></tr></thead><tbody><tr><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>❔</td><td>✅</td></tr></tbody></table>
<p>Criteria score: 🥇</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-k-input-unions-should-be-expressed-efficiently-in-the-query-and-on-the-wire">🎯 K. Input unions should be expressed efficiently in the query and on the wire<a href="#-k-input-unions-should-be-expressed-efficiently-in-the-query-and-on-the-wire" class="hash-link" aria-label="Direct link to 🎯 K. Input unions should be expressed efficiently in the query and on the wire" title="Direct link to 🎯 K. Input unions should be expressed efficiently in the query and on the wire">​</a></h2>
<p>The less typing and fewer bytes transmitted, the better.</p>
<p>(Not Related to B/H)</p>
<ul>
<li>✂️ Objection: The quantity of &quot;typing&quot; isn&#x27;t a worthwhile metric, most interactions with an API are programmatic.</li>
<li>✂️ Objection: Simply compressing an HTTP request will reduce the bytes transmitted more than anything having to do with the structure of a Schema.</li>
</ul>
<table><thead><tr><th><a href="#-1-explicit-__typename-discriminator-field">1</a></th><th><a href="#-2-explicit-configurable-discriminator-field">2</a></th><th><a href="#-3-order-based-discrimination">3</a></th><th><a href="#-4-structural-uniqueness">4</a></th><th><a href="#-5-one-of-tagged-union">5</a></th><th><a href="#-6-pending">6</a></th><th><a href="#-7-tagged-type">7</a></th></tr></thead><tbody><tr><td>✅</td><td>⚠️</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td></tr></tbody></table>
<p>Criteria score: 🥉</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-l-input-unions-should-be-performant-for-servers">🎯 L. Input unions should be performant for servers<a href="#-l-input-unions-should-be-performant-for-servers" class="hash-link" aria-label="Direct link to 🎯 L. Input unions should be performant for servers" title="Direct link to 🎯 L. Input unions should be performant for servers">​</a></h2>
<p>Ideally a server does not have to do much computation to determine which concrete type is represented by an input.</p>
<table><thead><tr><th><a href="#-1-explicit-__typename-discriminator-field">1</a></th><th><a href="#-2-explicit-configurable-discriminator-field">2</a></th><th><a href="#-3-order-based-discrimination">3</a></th><th><a href="#-4-structural-uniqueness">4</a></th><th><a href="#-5-one-of-tagged-union">5</a></th><th><a href="#-6-pending">6</a></th><th><a href="#-7-tagged-type">7</a></th></tr></thead><tbody><tr><td>✅</td><td>✅</td><td>⚠️</td><td>⚠️</td><td>✅</td><td>❔</td><td>✅</td></tr></tbody></table>
<p>Criteria score: 🥉</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-m-existing-sdl-parsers-are-backwards-compatible-with-sdl-additions">🎯 M. Existing SDL parsers are backwards compatible with SDL additions<a href="#-m-existing-sdl-parsers-are-backwards-compatible-with-sdl-additions" class="hash-link" aria-label="Direct link to 🎯 M. Existing SDL parsers are backwards compatible with SDL additions" title="Direct link to 🎯 M. Existing SDL parsers are backwards compatible with SDL additions">​</a></h2>
<p>Common tools that parse GraphQL SDL should not fail when pointed at a schema which supports polymorphic input types.</p>
<ul>
<li>✂️ Objection: Evolution of the SDL is expected with new features.</li>
<li>✂️ Objection: SDL syntax error can be a positive as a &quot;fail fast&quot; if a system doesn&#x27;t know about input unions.</li>
</ul>
<table><thead><tr><th><a href="#-1-explicit-__typename-discriminator-field">1</a></th><th><a href="#-2-explicit-configurable-discriminator-field">2</a></th><th><a href="#-3-order-based-discrimination">3</a></th><th><a href="#-4-structural-uniqueness">4</a></th><th><a href="#-5-one-of-tagged-union">5</a></th><th><a href="#-6-pending">6</a></th><th><a href="#-7-tagged-type">7</a></th></tr></thead><tbody><tr><td>🚫</td><td>🚫</td><td>🚫</td><td>🚫</td><td>✅</td><td>❔</td><td>🚫</td></tr></tbody></table>
<p>Criteria score: X (rejected)</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-n-existing-code-generated-tooling-is-backwards-compatible-with-introspection-additions">🎯 N. Existing code generated tooling is backwards compatible with Introspection additions<a href="#-n-existing-code-generated-tooling-is-backwards-compatible-with-introspection-additions" class="hash-link" aria-label="Direct link to 🎯 N. Existing code generated tooling is backwards compatible with Introspection additions" title="Direct link to 🎯 N. Existing code generated tooling is backwards compatible with Introspection additions">​</a></h2>
<p>For example, GraphiQL should successfully render when pointed at a schema which contains polymorphic input types. It should continue to function even if it can&#x27;t support the polymorphic input type.</p>
<table><thead><tr><th><a href="#-1-explicit-__typename-discriminator-field">1</a></th><th><a href="#-2-explicit-configurable-discriminator-field">2</a></th><th><a href="#-3-order-based-discrimination">3</a></th><th><a href="#-4-structural-uniqueness">4</a></th><th><a href="#-5-one-of-tagged-union">5</a></th><th><a href="#-6-pending">6</a></th><th><a href="#-7-tagged-type">7</a></th></tr></thead><tbody><tr><td>✅⚠️</td><td>✅⚠️</td><td>✅⚠️</td><td>✅⚠️</td><td>✅</td><td>❔</td><td>✅⚠️</td></tr></tbody></table>
<p>Criteria score: 🥈</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-o-unconstrained-combination-of-input-types-to-unions">🎯 O. Unconstrained combination of input types to unions<a href="#-o-unconstrained-combination-of-input-types-to-unions" class="hash-link" aria-label="Direct link to 🎯 O. Unconstrained combination of input types to unions" title="Direct link to 🎯 O. Unconstrained combination of input types to unions">​</a></h2>
<p>It should be possible to combine existing or new input types to unions freely and with ease.
Adding an input to one or more unions should not require​ extraneous changes, constrain or be constrained by schema design.</p>
<table><thead><tr><th><a href="#-1-explicit-__typename-discriminator-field">1</a></th><th><a href="#-2-explicit-configurable-discriminator-field">2</a></th><th><a href="#-3-order-based-discrimination">3</a></th><th><a href="#-4-structural-uniqueness">4</a></th><th><a href="#-5-one-of-tagged-union">5</a></th><th><a href="#-6-pending">6</a></th><th><a href="#-7-tagged-type">7</a></th></tr></thead><tbody><tr><td>✅️</td><td>🚫️</td><td>❔</td><td>🚫</td><td>✅</td><td>❔</td><td>✅</td></tr></tbody></table>
<p>Criteria score: 🥇</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-p-error-states-and-messages-should-be-clear-and-helpful">🎯 P. Error states and messages should be clear and helpful<a href="#-p-error-states-and-messages-should-be-clear-and-helpful" class="hash-link" aria-label="Direct link to 🎯 P. Error states and messages should be clear and helpful" title="Direct link to 🎯 P. Error states and messages should be clear and helpful">​</a></h2>
<p>Complex algorithms can make it difficult to write error messages that are helpful and clear.
When an invalid schema or invalid query are used, it should be obvious what went wrong and how to fix it.</p>
<table><thead><tr><th><a href="#-1-explicit-__typename-discriminator-field">1</a></th><th><a href="#-2-explicit-configurable-discriminator-field">2</a></th><th><a href="#-3-order-based-discrimination">3</a></th><th><a href="#-4-structural-uniqueness">4</a></th><th><a href="#-5-one-of-tagged-union">5</a></th><th><a href="#-6-pending">6</a></th><th><a href="#-7-tagged-type">7</a></th></tr></thead><tbody><tr><td>✅️</td><td>✅️</td><td>⚠️</td><td>🚫</td><td>✅</td><td>❔</td><td>✅</td></tr></tbody></table>
<p>Criteria score: 🥉</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-q-no-new-polymorphic-type-construct-should-be-introduced">🎯 Q. No new polymorphic type construct should be introduced<a href="#-q-no-new-polymorphic-type-construct-should-be-introduced" class="hash-link" aria-label="Direct link to 🎯 Q. No new polymorphic type construct should be introduced" title="Direct link to 🎯 Q. No new polymorphic type construct should be introduced">​</a></h2>
<p>The lack of polymorphism on input is only a side-effect of having 2 different type systems for input and output, a somewhat confusing GraphQL specificity (all mainstream programming language and API protocol use the same types for input and output).
Adding a new construct for polymorphism support on input &#x27;smells&#x27; like increasing confusion, and would increase the gap between input and output type systems, rather than reduce it.</p>
<table><thead><tr><th><a href="#-1-explicit-__typename-discriminator-field">1</a></th><th><a href="#-2-explicit-configurable-discriminator-field">2</a></th><th><a href="#-3-order-based-discrimination">3</a></th><th><a href="#-4-structural-uniqueness">4</a></th><th><a href="#-5-one-of-tagged-union">5</a></th><th><a href="#-6-pending">6</a></th><th><a href="#-7-tagged-type">7</a></th></tr></thead><tbody><tr><td>🚫️</td><td>🚫️</td><td>✅</td><td>🚫️</td><td>✅</td><td>❔</td><td>🚫️</td></tr></tbody></table>
<p>Criteria score: 🥇</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-p-validation-rule-should-produce-easy-to-understand-error-message">🎯 P. Validation rule should produce easy to understand error message<a href="#-p-validation-rule-should-produce-easy-to-understand-error-message" class="hash-link" aria-label="Direct link to 🎯 P. Validation rule should produce easy to understand error message" title="Direct link to 🎯 P. Validation rule should produce easy to understand error message">​</a></h2>
<p>Implementation of validation rules should be able to produce easy to understand error for value that is invalid according to definition of input union. It&#x27;s critical for developer experience since GrahphiQL, IDE and other similar tools will output this error during development.</p>
<table><thead><tr><th><a href="#-1-explicit-__typename-discriminator-field">1</a></th><th><a href="#-2-explicit-configurable-discriminator-field">2</a></th><th><a href="#-3-order-based-discrimination">3</a></th><th><a href="#-4-structural-uniqueness">4</a></th><th><a href="#-5-one-of-tagged-union">5</a></th></tr></thead><tbody><tr><td>✅️</td><td>✅️</td><td>🚫</td><td>🚫</td><td>✅</td></tr></tbody></table>
<h1>🚧 Possible Solutions</h1>
<p>The community has imagined a variety of possible solutions, synthesized here.</p>
<p>Each solution is identified with a <code>Number</code> so they can be referenced in the rest of the document. New solutions must be added to the end of the list.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-1-explicit-__typename-discriminator-field">💡 1. Explicit <code>__typename</code> Discriminator field<a href="#-1-explicit-__typename-discriminator-field" class="hash-link" aria-label="Direct link to -1-explicit-__typename-discriminator-field" title="Direct link to -1-explicit-__typename-discriminator-field">​</a></h2>
<p><strong>Champion:</strong> @eapache</p>
<p>This solution was discussed in <a href="https://github.com/graphql/graphql-spec/pull/395" target="_blank" rel="noopener noreferrer">https://github.com/graphql/graphql-spec/pull/395</a></p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token atom-input class-name">CatInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">livesLeft</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token atom-input class-name">DogInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">breed</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">DogBreed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">inputunion</span><span class="token plain"> </span><span class="token atom-input class-name">AnimalInput</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token atom-input class-name">CatInput</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token atom-input class-name">DogInput</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Mutation</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">logAnimalDropOff</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">animals</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token atom-input class-name">AnimalInput</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Variables:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Portland, OR&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">animals</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">__typename</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;CatInput&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Buster&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">livesLeft</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-variations">🎲 Variations<a href="#-variations" class="hash-link" aria-label="Direct link to 🎲 Variations" title="Direct link to 🎲 Variations">​</a></h3>
<ul>
<li>
<p>A <code>default</code> type may be defined, for which specifying the <code>__typename</code> is not required. This enables a field to migration from an <code>Input</code> to an <code>Input Union</code></p>
</li>
<li>
<p>The discriminator field may be <code>__inputname</code> to differentiate from an Output&#x27;s <code>__typename</code></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="️-evaluation">⚖️ Evaluation<a href="#️-evaluation" class="hash-link" aria-label="Direct link to ⚖️ Evaluation" title="Direct link to ⚖️ Evaluation">​</a></h3>
<ul>
<li><a href="#-a-graphql-should-contain-a-polymorphic-input-type">A. GraphQL should contain a polymorphic Input type</a>
<ul>
<li>✅</li>
</ul>
</li>
<li><a href="#-b-input-polymorphism-matches-output-polymorphism">B. Input polymorphism matches output polymorphism</a>
<ul>
<li>✅ Data structures can mirror eachother.</li>
<li>⚠️ <code>__typename</code> can not match since Input &amp; Output types are distinct (ex: <code>Cat</code> vs <code>CatInput</code>).</li>
</ul>
</li>
<li><a href="#-c-doesnt-inhibit-schema-evolution">C. Doesn&#x27;t inhibit schema evolution</a>
<ul>
<li>✅ Discriminator is explicit.</li>
</ul>
</li>
<li><a href="#-d-any-member-type-restrictions-are-validated-in-schema">D. Any member type restrictions are validated in schema</a>
<ul>
<li>✅ No member type restrictions</li>
</ul>
</li>
<li><a href="#-e-a-member-type-may-be-a-leaf-type">E. A member type may be a Leaf type</a>
<ul>
<li>🚫 Requires a type to provide a discriminator field</li>
</ul>
</li>
<li><a href="#-f-migrating-a-field-to-a-polymorphic-input-type-is-non-breaking">F. Migrating a field to a polymorphic input type is non-breaking</a>
<ul>
<li>⚠️ Discriminator field is required.</li>
<li>✅ Defaulting to the previous input type enables migration.</li>
</ul>
</li>
<li><a href="#-h-input-unions-should-accept-plain-data">H. Input unions should accept plain data</a>
<ul>
<li>⚠️ One additional field is required.</li>
</ul>
</li>
<li><a href="#-i-input-unions-should-be-easy-to-upgrade-from-existing-solutions">I. Input unions should be easy to upgrade from existing solutions</a>
<ul>
<li>✅ Defaulting to the previous input type enables upgrading</li>
</ul>
</li>
<li><a href="#-j-a-graphql-schema-that-supports-input-unions-can-be-queried-by-older-graphql-clients">J. A GraphQL schema that supports input unions can be queried by older GraphQL clients</a>
<ul>
<li>✅ Changes are additive only</li>
</ul>
</li>
<li><a href="#-k-input-unions-should-be-expressed-efficiently-in-the-query-and-on-the-wire">K. Input unions should be expressed efficiently in the query and on the wire</a>
<ul>
<li>✅ Discriminator field only needed when used in union</li>
<li>✅ Compresses well, as the field name is always the same</li>
</ul>
</li>
<li><a href="#-l-input-unions-should-be-performant-for-servers">L. Input unions should be performant for servers</a>
<ul>
<li>✅ O(1)</li>
</ul>
</li>
<li><a href="#-m-existing-sdl-parsers-are-backwards-compatible-with-sdl-additions">M. Existing SDL parsers are backwards compatible with SDL additions</a>
<ul>
<li>🚫 Parsers will not recognize the <code>inputunion</code> keyword</li>
</ul>
</li>
<li><a href="#-n-existing-code-generated-tooling-is-backwards-compatible-with-introspection-additions">N. Existing code generated tooling is backwards compatible with Introspection additions</a>
<ul>
<li>✅⚠️</li>
</ul>
</li>
<li><a href="#-o-unconstrained-combination-of-input-types-to-unions">O. Unconstrained combination of input types to unions</a>
<ul>
<li>✅ Adding or removing an input type to a union has no extraneous effects on schema design</li>
</ul>
</li>
<li><a href="#-p-error-states-and-messages-should-be-clear-and-helpful">P. Error states and messages should be clear and helpful</a>
<ul>
<li>✅</li>
</ul>
</li>
<li><a href="#-q-no-new-polymorphic-type-construct-should-be-introduced">Q. No new polymorphic type construct should be introduced</a>
<ul>
<li>🚫️ <code>ìnputunion</code> is a new type construct</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-2-explicit-configurable-discriminator-field">💡 2. Explicit configurable Discriminator field<a href="#-2-explicit-configurable-discriminator-field" class="hash-link" aria-label="Direct link to 💡 2. Explicit configurable Discriminator field" title="Direct link to 💡 2. Explicit configurable Discriminator field">​</a></h2>
<p><strong>Champion:</strong> @binaryseed</p>
<p>A configurable discriminator field enables schema authors to model type discrimination into their schema more naturally.</p>
<p>A schema author may choose to add their chosen type discriminator field to output types as well to completely mirror the structure in a way that enables sending data back and forth through input &amp; output with no transformations.</p>
<p>The mechanism for configuring the discriminator field is open to debate, in this example it&#x27;s represented with the use of a schema directive.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-variations-1">🎲 Variations<a href="#-variations-1" class="hash-link" aria-label="Direct link to 🎲 Variations" title="Direct link to 🎲 Variations">​</a></h3>
<ul>
<li>Value is a <code>Enum</code> literal</li>
</ul>
<p>This variation is derived from discussions in <a href="https://github.com/graphql/graphql-spec/issues/488" target="_blank" rel="noopener noreferrer">https://github.com/graphql/graphql-spec/issues/488</a></p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token class-name">AnimalSpecies</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token constant" style="color:#36acaa">CAT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token constant" style="color:#36acaa">DOG</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token atom-input class-name">CatInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">species</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">AnimalSpecies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token constant" style="color:#36acaa">CAT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token atom-input class-name">DogInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">species</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">AnimalSpecies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token constant" style="color:#36acaa">DOG</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">inputunion</span><span class="token plain"> </span><span class="token atom-input class-name">AnimalInput</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@discriminator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">field</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;species&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token atom-input class-name">CatInput</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token atom-input class-name">DogInput</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Variables:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Portland, OR&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">animals</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">species</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;CAT&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Buster&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">livesLeft</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Value is a <code>String</code> literal</li>
</ul>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token atom-input class-name">CatInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">species</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Cat&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token atom-input class-name">DogInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">species</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Dog&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">inputunion</span><span class="token plain"> </span><span class="token atom-input class-name">AnimalInput</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@discriminator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">field</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;species&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token atom-input class-name">CatInput</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token atom-input class-name">DogInput</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Variables:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Portland, OR&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">animals</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">species</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Cat&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Buster&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">livesLeft</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="️-evaluation-1">⚖️ Evaluation<a href="#️-evaluation-1" class="hash-link" aria-label="Direct link to ⚖️ Evaluation" title="Direct link to ⚖️ Evaluation">​</a></h3>
<ul>
<li><a href="#-a-graphql-should-contain-a-polymorphic-input-type">A. GraphQL should contain a polymorphic Input type</a>
<ul>
<li>✅</li>
</ul>
</li>
<li><a href="#-b-input-polymorphism-matches-output-polymorphism">B. Input polymorphism matches output polymorphism</a>
<ul>
<li>✅ Data structures can mirror eachother.</li>
</ul>
</li>
<li><a href="#-c-doesnt-inhibit-schema-evolution">C. Doesn&#x27;t inhibit schema evolution</a>
<ul>
<li>✅ Discriminator is explicit.</li>
<li>⚠️ Adding an existing input type to an input union requires it to add the non-null discriminator field</li>
</ul>
</li>
<li><a href="#-d-any-member-type-restrictions-are-validated-in-schema">D. Any member type restrictions are validated in schema</a>
<ul>
<li>✅ Schema validation can check that all members of the input union have the discriminator field</li>
</ul>
</li>
<li><a href="#-e-a-member-type-may-be-a-leaf-type">E. A member type may be a Leaf type</a>
<ul>
<li>🚫 Requires a type to provide a discriminator field</li>
</ul>
</li>
<li><a href="#-f-migrating-a-field-to-a-polymorphic-input-type-is-non-breaking">F. Migrating a field to a polymorphic input type is non-breaking</a>
<ul>
<li>⚠️ Discriminator field is required.</li>
<li>✅ Defaulting to the previous input type enables migration</li>
</ul>
</li>
<li><a href="#-h-input-unions-should-accept-plain-data">H. Input unions should accept plain data</a>
<ul>
<li>⚠️ One additional field is required.</li>
</ul>
</li>
<li><a href="#-i-input-unions-should-be-easy-to-upgrade-from-existing-solutions">I. Input unions should be easy to upgrade from existing solutions</a>
<ul>
<li>✅ Defaulting to the previous input type enables upgrading</li>
</ul>
</li>
<li><a href="#-j-a-graphql-schema-that-supports-input-unions-can-be-queried-by-older-graphql-clients">J. A GraphQL schema that supports input unions can be queried by older GraphQL clients</a>
<ul>
<li>✅ Changes are additive only</li>
</ul>
</li>
<li><a href="#-k-input-unions-should-be-expressed-efficiently-in-the-query-and-on-the-wire">K. Input unions should be expressed efficiently in the query and on the wire</a>
<ul>
<li>⚠️ Input types that are part of an input union always have to contain the non-null discriminator</li>
</ul>
</li>
<li><a href="#-l-input-unions-should-be-performant-for-servers">L. Input unions should be performant for servers</a>
<ul>
<li>✅ O(1)</li>
</ul>
</li>
<li><a href="#-m-existing-sdl-parsers-are-backwards-compatible-with-sdl-additions">M. Existing SDL parsers are backwards compatible with SDL additions</a>
<ul>
<li>🚫 Parsers will not recognize the <code>inputunion</code> keyword</li>
</ul>
</li>
<li><a href="#-n-existing-code-generated-tooling-is-backwards-compatible-with-introspection-additions">N. Existing code generated tooling is backwards compatible with Introspection additions</a>
<ul>
<li>✅⚠️</li>
</ul>
</li>
<li><a href="#-o-unconstrained-combination-of-input-types-to-unions">O. Unconstrained combination of input types to unions</a>
<ul>
<li>🚫 Adding an input type to a union requires that it has the non-null discriminator field<!-- -->
<ul>
<li>The input might already have a field with the same name, but a different type</li>
<li>Reusing input types in multiple input unions can become unwieldy</li>
</ul>
</li>
</ul>
</li>
<li><a href="#-p-error-states-and-messages-should-be-clear-and-helpful">P. Error states and messages should be clear and helpful</a>
<ul>
<li>✅</li>
</ul>
</li>
<li><a href="#-q-no-new-polymorphic-type-construct-should-be-introduced">Q. No new polymorphic type construct should be introduced</a>
<ul>
<li>🚫️ <code>ìnputunion</code> is a new type construct</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-3-order-based-discrimination">💡 3. Order based discrimination<a href="#-3-order-based-discrimination" class="hash-link" aria-label="Direct link to 💡 3. Order based discrimination" title="Direct link to 💡 3. Order based discrimination">​</a></h2>
<p><strong>Champion:</strong> @leebyron</p>
<p>The concrete type is the first type in the input union definition that matches.</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token atom-input class-name">CatInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">livesLeft</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token atom-input class-name">DogInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">breed</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">DogBreed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">owner</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">inputunion</span><span class="token plain"> </span><span class="token atom-input class-name">AnimalInput</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token atom-input class-name">CatInput</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token atom-input class-name">DogInput</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Mutation</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">logAnimalDropOff</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">animals</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token atom-input class-name">AnimalInput</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Variables:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Portland, OR&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">animals</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Buster&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># =&gt; CatInput</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Buster&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">breed</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;WHIPPET&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># =&gt; DogInput</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="️-evaluation-2">⚖️ Evaluation<a href="#️-evaluation-2" class="hash-link" aria-label="Direct link to ⚖️ Evaluation" title="Direct link to ⚖️ Evaluation">​</a></h3>
<ul>
<li><a href="#-a-graphql-should-contain-a-polymorphic-input-type">A. GraphQL should contain a polymorphic Input type</a>
<ul>
<li>✅</li>
</ul>
</li>
<li><a href="#-b-input-polymorphism-matches-output-polymorphism">B. Input polymorphism matches output polymorphism</a>
<ul>
<li>✅ Data structures can mirror eachother</li>
</ul>
</li>
<li><a href="#-c-doesnt-inhibit-schema-evolution">C. Doesn&#x27;t inhibit schema evolution</a>
<ul>
<li>
<p>🚫 Adding a nullable field to an input object could change the detected type of fields or arguments in pre-existing operations.</p>
<p>Using the example Schema, we can demonstrate this problem. Assume a mutation like this is being submitted:</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">mutation</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property-query property-mutation property-mutation">logAnimalDropOff</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token description string" style="color:#e3116c">&quot;</span><span class="token description string language-markdown" style="color:#e3116c">Portland, OR</span><span class="token description string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">animals</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Old Yeller&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">owner</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Travis&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Currently, order based type descrimination resolves to <code>DogInput</code>. However, if we modify <code>CatInput</code> to contain an <code>owner</code> field, type descrimination changes to <code>CatInput</code> even though the mutation submitted has not changed.</p>
</li>
</ul>
</li>
<li><a href="#-d-any-member-type-restrictions-are-validated-in-schema">D. Any member type restrictions are validated in schema</a>
<ul>
<li>✅ No member type restrictions</li>
</ul>
</li>
<li><a href="#-e-a-member-type-may-be-a-leaf-type">E. A member type may be a Leaf type</a>
<ul>
<li>✅ Scalars could be listed in the inputunion and evaluated in order</li>
<li>⚠️ Subject to subtle dangerous behavior. ie: <code>String</code> listed before an Enum could never match the Enum</li>
</ul>
</li>
<li><a href="#-f-migrating-a-field-to-a-polymorphic-input-type-is-non-breaking">F. Migrating a field to a polymorphic input type is non-breaking</a>
<ul>
<li>✅ Listing the old input type first enables migration</li>
</ul>
</li>
<li><a href="#-h-input-unions-should-accept-plain-data">H. Input unions should accept plain data</a>
<ul>
<li>✅ No extra fields or structure required</li>
</ul>
</li>
<li><a href="#-i-input-unions-should-be-easy-to-upgrade-from-existing-solutions">I. Input unions should be easy to upgrade from existing solutions</a>
<ul>
<li>✅ Listing the old input type first enables enables upgrading</li>
</ul>
</li>
<li><a href="#-j-a-graphql-schema-that-supports-input-unions-can-be-queried-by-older-graphql-clients">J. A GraphQL schema that supports input unions can be queried by older GraphQL clients</a>
<ul>
<li>✅ Changes are additive only</li>
</ul>
</li>
<li><a href="#-k-input-unions-should-be-expressed-efficiently-in-the-query-and-on-the-wire">K. Input unions should be expressed efficiently in the query and on the wire</a>
<ul>
<li>✅ No overhead</li>
</ul>
</li>
<li><a href="#-l-input-unions-should-be-performant-for-servers">L. Input unions should be performant for servers</a>
<ul>
<li>⚠️ O(N of members)</li>
</ul>
</li>
<li><a href="#-m-existing-sdl-parsers-are-backwards-compatible-with-sdl-additions">M. Existing SDL parsers are backwards compatible with SDL additions</a>
<ul>
<li>🚫 Parsers will not recognize the <code>inputunion</code> keyword</li>
</ul>
</li>
<li><a href="#-n-existing-code-generated-tooling-is-backwards-compatible-with-introspection-additions">N. Existing code generated tooling is backwards compatible with Introspection additions</a>
<ul>
<li>✅⚠️</li>
</ul>
</li>
<li><a href="#-o-unconstrained-combination-of-input-types-to-unions">O. Unconstrained combination of input types to unions</a>
<ul>
<li>❔ Not evaluated</li>
</ul>
</li>
<li><a href="#-p-error-states-and-messages-should-be-clear-and-helpful">P. Error states and messages should be clear and helpful</a>
<ul>
<li>⚠️ Order-based discrimination can lead to some subtle issues based on when one type is chosen over another.</li>
</ul>
</li>
<li><a href="#-q-no-new-polymorphic-type-construct-should-be-introduced">Q. No new polymorphic type construct should be introduced</a>
<ul>
<li>✅ No new construct</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-4-structural-uniqueness">💡 4. Structural uniqueness<a href="#-4-structural-uniqueness" class="hash-link" aria-label="Direct link to 💡 4. Structural uniqueness" title="Direct link to 💡 4. Structural uniqueness">​</a></h2>
<p>Schema Rule: Each type in the union must have a unique set of required field names</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token atom-input class-name">CatInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">livesLeft</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token atom-input class-name">DogInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">breed</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">DogBreed</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">inputunion</span><span class="token plain"> </span><span class="token atom-input class-name">AnimalInput</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token atom-input class-name">CatInput</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token atom-input class-name">DogInput</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Mutation</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">logAnimalDropOff</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">animals</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token atom-input class-name">AnimalInput</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Variables:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Portland, OR&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">animals</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Buster&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">livesLeft</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># =&gt; CatInput</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Buster&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">breed</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;WHIPPET&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># =&gt; DogInput</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>An invalid schema:</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token atom-input class-name">CatInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">livesLeft</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token atom-input class-name">DogInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">breed</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">DogBreed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-variations-2">🎲 Variations<a href="#-variations-2" class="hash-link" aria-label="Direct link to 🎲 Variations" title="Direct link to 🎲 Variations">​</a></h3>
<ul>
<li>Consider the field <em>type</em> along with the field <em>name</em> when determining uniqueness.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="️-evaluation-3">⚖️ Evaluation<a href="#️-evaluation-3" class="hash-link" aria-label="Direct link to ⚖️ Evaluation" title="Direct link to ⚖️ Evaluation">​</a></h3>
<ul>
<li><a href="#-a-graphql-should-contain-a-polymorphic-input-type">A. GraphQL should contain a polymorphic Input type</a>
<ul>
<li>✅</li>
</ul>
</li>
<li><a href="#-b-input-polymorphism-matches-output-polymorphism">B. Input polymorphism matches output polymorphism</a>
<ul>
<li>✅ Data structures can mirror eachother&#x27;s fields</li>
<li>⚠️ Restrictions on required fields may prevent matching output types</li>
</ul>
</li>
<li><a href="#-c-doesnt-inhibit-schema-evolution">C. Doesn&#x27;t inhibit schema evolution</a>
<ul>
<li>⚠️ Inputs may be forced to include extraneous fields to ensure uniqueness.</li>
<li>⚠️ Making a field nullable may be impossible without losing uniqueness</li>
</ul>
</li>
<li><a href="#-d-any-member-type-restrictions-are-validated-in-schema">D. Any member type restrictions are validated in schema</a>
<ul>
<li>✅ A &quot;uniqueness&quot; algorithm must be applied during schema validation</li>
</ul>
</li>
<li><a href="#-e-a-member-type-may-be-a-leaf-type">E. A member type may be a Leaf type</a>
<ul>
<li>🚫 Ambiguous types unable to be discriminated. ex: <code>String</code> vs <code>Enum</code> vs <code>ID</code></li>
</ul>
</li>
<li><a href="#-f-migrating-a-field-to-a-polymorphic-input-type-is-non-breaking">F. Migrating a field to a polymorphic input type is non-breaking</a>
<ul>
<li>⚠️ All new types added to the union must differ structurally from the previous type</li>
</ul>
</li>
<li><a href="#-h-input-unions-should-accept-plain-data">H. Input unions should accept plain data</a>
<ul>
<li>✅ No extra fields or structure required</li>
</ul>
</li>
<li><a href="#-i-input-unions-should-be-easy-to-upgrade-from-existing-solutions">I. Input unions should be easy to upgrade from existing solutions</a>
<ul>
<li>⚠️ All new types added to the union must differ structurally from the previous type</li>
</ul>
</li>
<li><a href="#-j-a-graphql-schema-that-supports-input-unions-can-be-queried-by-older-graphql-clients">J. A GraphQL schema that supports input unions can be queried by older GraphQL clients</a>
<ul>
<li>✅ Changes are additive only</li>
</ul>
</li>
<li><a href="#-k-input-unions-should-be-expressed-efficiently-in-the-query-and-on-the-wire">K. Input unions should be expressed efficiently in the query and on the wire</a>
<ul>
<li>✅ No overhead</li>
</ul>
</li>
<li><a href="#-l-input-unions-should-be-performant-for-servers">L. Input unions should be performant for servers</a>
<ul>
<li>⚠️ O(N of members)</li>
</ul>
</li>
<li><a href="#-m-existing-sdl-parsers-are-backwards-compatible-with-sdl-additions">M. Existing SDL parsers are backwards compatible with SDL additions</a>
<ul>
<li>🚫 Parsers will not recognize the <code>inputunion</code> keyword</li>
</ul>
</li>
<li><a href="#-n-existing-code-generated-tooling-is-backwards-compatible-with-introspection-additions">N. Existing code generated tooling is backwards compatible with Introspection additions</a>
<ul>
<li>✅⚠️</li>
</ul>
</li>
<li><a href="#-o-unconstrained-combination-of-input-types-to-unions">O. Unconstrained combination of input types to unions</a>
<ul>
<li>🚫 Input types with similar fields may not be able to be combined without breaking changes</li>
</ul>
</li>
<li><a href="#-p-error-states-and-messages-should-be-clear-and-helpful">P. Error states and messages should be clear and helpful</a>
<ul>
<li>🚫 Structural uniqueness checks are very complex and have many hard-to-describe failure states.</li>
</ul>
</li>
<li><a href="#-q-no-new-polymorphic-type-construct-should-be-introduced">Q. No new polymorphic type construct should be introduced</a>
<ul>
<li>🚫️ <code>ìnputunion</code> is a new type construct</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-5-one-of-tagged-union">💡 5. One Of (Tagged Union)<a href="#-5-one-of-tagged-union" class="hash-link" aria-label="Direct link to 💡 5. One Of (Tagged Union)" title="Direct link to 💡 5. One Of (Tagged Union)">​</a></h2>
<p><strong>Champion:</strong> @benjie</p>
<p>This solution was presented in:</p>
<ul>
<li><a href="https://github.com/graphql/graphql-spec/pull/395#issuecomment-361373097" target="_blank" rel="noopener noreferrer">https://github.com/graphql/graphql-spec/pull/395#issuecomment-361373097</a></li>
<li><a href="https://github.com/graphql/graphql-spec/pull/586" target="_blank" rel="noopener noreferrer">https://github.com/graphql/graphql-spec/pull/586</a></li>
</ul>
<p>The type is discriminated using features already available in GraphQL, with an intermediate input type that acts to &quot;tag&quot; the field.</p>
<p>A proposed directive would specify that only one of the fields in an input type may be provided. This provides schema-level validation instead of relying on a runtime error to express the restriction.</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token atom-input class-name">CatInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">livesLeft</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token atom-input class-name">DogInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">breed</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">DogBreed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token atom-input class-name">AnimalInput</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@oneOf</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">cat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token atom-input class-name">CatInput</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">dog</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token atom-input class-name">DogInput</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Mutation</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">logAnimalDropOff</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">animals</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token atom-input class-name">AnimalInput</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Variables:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Portland, OR&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">animals</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">cat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Buster&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token attr-name" style="color:#00a4db">livesLeft</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="️-evaluation-4">⚖️ Evaluation<a href="#️-evaluation-4" class="hash-link" aria-label="Direct link to ⚖️ Evaluation" title="Direct link to ⚖️ Evaluation">​</a></h3>
<ul>
<li><a href="#-a-graphql-should-contain-a-polymorphic-input-type">A. GraphQL should contain a polymorphic Input type</a>
<ul>
<li>✅ Tagged union is a valid version of a polymorphic type</li>
</ul>
</li>
<li><a href="#-b-input-polymorphism-matches-output-polymorphism">B. Input polymorphism matches output polymorphism</a>
<ul>
<li>🚫 The shape of the input type is forced to have a different structure than the corresponding output type.</li>
</ul>
</li>
<li><a href="#-c-doesnt-inhibit-schema-evolution">C. Doesn&#x27;t inhibit schema evolution</a>
<ul>
<li>✅ This technique is already in use in many schemas with the extra validation</li>
</ul>
</li>
<li><a href="#-d-any-member-type-restrictions-are-validated-in-schema">D. Any member type restrictions are validated in schema</a>
<ul>
<li>✅ No schema changes, only an additional client side validation is added</li>
</ul>
</li>
<li><a href="#-e-a-member-type-may-be-a-leaf-type">E. A member type may be a Leaf type</a>
<ul>
<li>✅ Any GraphQL type may be used</li>
</ul>
</li>
<li><a href="#-f-migrating-a-field-to-a-polymorphic-input-type-is-non-breaking">F. Migrating a field to a polymorphic input type is non-breaking</a>
<ul>
<li>🚫 Previously-valid inputs now need to be wrapped in a container object</li>
</ul>
</li>
<li><a href="#-g-input-unions-may-include-other-input-unions">G. Input unions may include other input unions</a>
<ul>
<li>✅ Any GraphQL type may be used, including other tagged types and wrapper types such as list</li>
</ul>
</li>
<li><a href="#-h-input-unions-should-accept-plain-data">H. Input unions should accept plain data</a>
<ul>
<li>⚠️ The data is wrapped in a (simple) container type</li>
</ul>
</li>
<li><a href="#-i-input-unions-should-be-easy-to-upgrade-from-existing-solutions">I. Input unions should be easy to upgrade from existing solutions</a>
<ul>
<li>✅ No migration required, as this pattern is already possible</li>
</ul>
</li>
<li><a href="#-j-a-graphql-schema-that-supports-input-unions-can-be-queried-by-older-graphql-clients">J. A GraphQL schema that supports input unions can be queried by older GraphQL clients</a>
<ul>
<li>✅ Changes are additive only</li>
</ul>
</li>
<li><a href="#-k-input-unions-should-be-expressed-efficiently-in-the-query-and-on-the-wire">K. Input unions should be expressed efficiently in the query and on the wire</a>
<ul>
<li>✅ Indication of the type can be done in 6 additional JSON characters per value (e.g. <code>{&quot;a&quot;:VALUE_HERE}</code>) and would compress easily.</li>
</ul>
</li>
<li><a href="#-l-input-unions-should-be-performant-for-servers">L. Input unions should be performant for servers</a>
<ul>
<li>✅ Type is easily determined by looking up the specified field name</li>
</ul>
</li>
<li><a href="#-m-existing-sdl-parsers-are-backwards-compatible-with-sdl-additions">M. Existing SDL parsers are backwards compatible with SDL additions</a>
<ul>
<li>✅ Proposal uses a simple directive; directive parsing is widely supported</li>
</ul>
</li>
<li><a href="#-n-existing-code-generated-tooling-is-backwards-compatible-with-introspection-additions">N. Existing code generated tooling is backwards compatible with Introspection additions</a>
<ul>
<li>✅ Existing code generation tools will degrade gracefully to a regular input object</li>
</ul>
</li>
<li><a href="#-o-unconstrained-combination-of-input-types-to-unions">O. Unconstrained combination of input types to unions</a>
<ul>
<li>✅ Adding or removing input types to a tagged union requires no extraneous effort</li>
</ul>
</li>
<li><a href="#-p-error-states-and-messages-should-be-clear-and-helpful">P. Error states and messages should be clear and helpful</a>
<ul>
<li>✅</li>
</ul>
</li>
<li><a href="#-q-no-new-polymorphic-type-construct-should-be-introduced">Q. No new polymorphic type construct should be introduced</a>
<ul>
<li>✅</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="summary-of-spec-changes">Summary of spec changes<a href="#summary-of-spec-changes" class="hash-link" aria-label="Direct link to Summary of spec changes" title="Direct link to Summary of spec changes">​</a></h3>
<ul>
<li><strong>SDL</strong>: enable use of <code>@oneOf</code> directive on input object type definitions</li>
<li><strong>Introspection</strong>: add <code>requiresExactlyOneField: Boolean</code> field to <code>__Type</code> type</li>
<li><strong>Schema validation</strong>: all fields on a <code>@oneOf</code> input type must be nullable, and must not have defaults</li>
<li><strong>Operation validation</strong>: when validating a <code>@oneOf</code> input object, assert that exactly one field was specified</li>
</ul>
<p><a href="https://github.com/graphql/graphql-spec/pull/586/files" target="_blank" rel="noopener noreferrer">The full spec changes can be seen here</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-6-pending">💡 6. Pending<a href="#-6-pending" class="hash-link" aria-label="Direct link to 💡 6. Pending" title="Direct link to 💡 6. Pending">​</a></h2>
<p>Calls within the Input Union working group proposed a new solution, solution 6,
which is a combination of features from solutions 1-4. It has not been fully
formalized yet as the working group felt that the Tagged Type was more
promising at this stage. This section is left as a placeholder for solution 6
to be formally evaluated at a later time.</p>
<p>For some of the notes we took during the calls, see:
<a href="https://github.com/graphql/graphql-wg/issues/426#issuecomment-685636596" target="_blank" rel="noopener noreferrer">https://github.com/graphql/graphql-wg/issues/426#issuecomment-685636596</a></p>
<p>For the calls themselves, see:
<a href="https://www.youtube.com/watch?v=u2dnnpKEHZM&amp;list=PLP1igyLx8foH4M0YAbVqpSo2fS1ElvNVD" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=u2dnnpKEHZM&amp;list=PLP1igyLx8foH4M0YAbVqpSo2fS1ElvNVD</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-7-tagged-type">💡 7. Tagged Type<a href="#-7-tagged-type" class="hash-link" aria-label="Direct link to 💡 7. Tagged Type" title="Direct link to 💡 7. Tagged Type">​</a></h2>
<p><strong>Champion:</strong> @benjie</p>
<p>This solution was presented in:</p>
<ul>
<li><a href="https://github.com/graphql/graphql-spec/pull/733" target="_blank" rel="noopener noreferrer">https://github.com/graphql/graphql-spec/pull/733</a></li>
</ul>
<p>It&#x27;s the spiritual successor of <a href="#solution-5">Solution 5 - the @oneOf
directive</a> after extensive feedback from the Input Unions working
group.</p>
<p>In this solution, a new type is introduced to the GraphQL type system: the
tagged type. The tagged type has two forms: a <code>tagged input</code> (valid only in
inputs) and a <code>tagged output</code> (valid only in outputs), but the definitions look
identical otherwise.</p>
<p>These tagged types define a list of member fields, exactly one of which must be
present.</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token atom-input class-name">CatInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">livesLeft</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token atom-input class-name">DogInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">breed</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">DogBreed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">tagged</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">input</span><span class="token plain"> </span><span class="token atom-input class-name">AnimalInput</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">cat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token atom-input class-name">CatInput</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">dog</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token atom-input class-name">DogInput</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Mutation</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">logAnimalDropOff</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">animals</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token atom-input class-name">AnimalInput</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Variables:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">location</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Portland, OR&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">animals</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">cat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Buster&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token attr-name" style="color:#00a4db">livesLeft</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>There&#x27;s controversy over whether the <code>tagged output</code> should be introduced or
not, more details on this can be read in
<a href="https://github.com/graphql/graphql-spec/pull/733" target="_blank" rel="noopener noreferrer">https://github.com/graphql/graphql-spec/pull/733</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="️-evaluation-5">⚖️ Evaluation<a href="#️-evaluation-5" class="hash-link" aria-label="Direct link to ⚖️ Evaluation" title="Direct link to ⚖️ Evaluation">​</a></h3>
<ul>
<li><a href="#-a-graphql-should-contain-a-polymorphic-input-type">A. GraphQL should contain a polymorphic Input type</a>
<ul>
<li>✅ Tagged is a valid version of a polymorphic type</li>
</ul>
</li>
<li><a href="#-b-input-polymorphism-matches-output-polymorphism">B. Input polymorphism matches output polymorphism</a>
<ul>
<li>✅ When <code>tagged input</code> and <code>tagged output</code> are both included into the
spec, a <code>tagged output</code> can have a mirrored <code>tagged input</code> in a similar way
that a <code>type</code> can have a mirrored <code>input</code></li>
<li>⚠️ There&#x27;s controversy over whether <code>tagged output</code> should be included in
the spec as it causes confusion as to when to use union, interface, or
tagged</li>
</ul>
</li>
<li><a href="#-c-doesnt-inhibit-schema-evolution">C. Doesn&#x27;t inhibit schema evolution</a>
<ul>
<li>✅ This technique is an evolution of a technique already in use in many schemas</li>
</ul>
</li>
<li><a href="#-d-any-member-type-restrictions-are-validated-in-schema">D. Any member type restrictions are validated in schema</a>
<ul>
<li>✅ Tagged member fields are well defined</li>
</ul>
</li>
<li><a href="#-e-a-member-type-may-be-a-leaf-type">E. A member type may be a Leaf type</a>
<ul>
<li>✅ Any GraphQL type may be used, including other tagged types and wrapper types such as list</li>
</ul>
</li>
<li><a href="#-f-migrating-a-field-to-a-polymorphic-input-type-is-non-breaking">F. Migrating a field to a polymorphic input type is non-breaking</a>
<ul>
<li>🚫 Previously-valid inputs now need to be wrapped in a container object</li>
</ul>
</li>
<li><a href="#-g-input-unions-may-include-other-input-unions">G. Input unions may include other input unions</a>
<ul>
<li>✅ Any GraphQL type may be used, including other tagged types and wrapper types such as list</li>
</ul>
</li>
<li><a href="#-h-input-unions-should-accept-plain-data">H. Input unions should accept plain data</a>
<ul>
<li>⚠️ The data is wrapped in a (simple) container type</li>
</ul>
</li>
<li><a href="#-i-input-unions-should-be-easy-to-upgrade-from-existing-solutions">I. Input unions should be easy to upgrade from existing solutions</a>
<ul>
<li>✅ This pattern is already possible, existing tagged inputs can be converted to Tagged type</li>
</ul>
</li>
<li><a href="#-j-a-graphql-schema-that-supports-input-unions-can-be-queried-by-older-graphql-clients">J. A GraphQL schema that supports input unions can be queried by older GraphQL clients</a>
<ul>
<li>✅ Changes are additive only</li>
</ul>
</li>
<li><a href="#-k-input-unions-should-be-expressed-efficiently-in-the-query-and-on-the-wire">K. Input unions should be expressed efficiently in the query and on the wire</a>
<ul>
<li>✅ Indication of the type can be done in 6 additional JSON characters per value (e.g. <code>{&quot;a&quot;:VALUE_HERE}</code>) and would compress easily.</li>
</ul>
</li>
<li><a href="#-l-input-unions-should-be-performant-for-servers">L. Input unions should be performant for servers</a>
<ul>
<li>✅ Type is easily determined by looking up the specified field name</li>
</ul>
</li>
<li><a href="#-m-existing-sdl-parsers-are-backwards-compatible-with-sdl-additions">M. Existing SDL parsers are backwards compatible with SDL additions</a>
<ul>
<li>🚫 New keywords are introduced</li>
</ul>
</li>
<li><a href="#-n-existing-code-generated-tooling-is-backwards-compatible-with-introspection-additions">N. Existing code generated tooling is backwards compatible with Introspection additions</a>
<ul>
<li>✅⚠️</li>
</ul>
</li>
<li><a href="#-o-unconstrained-combination-of-input-types-to-unions">O. Unconstrained combination of input types to unions</a>
<ul>
<li>✅ Adding or removing member fields to a tagged type requires no extraneous effort and has no non-local consequences</li>
</ul>
</li>
<li><a href="#-p-error-states-and-messages-should-be-clear-and-helpful">P. Error states and messages should be clear and helpful</a>
<ul>
<li>✅</li>
</ul>
</li>
<li><a href="#-q-no-new-polymorphic-type-construct-should-be-introduced">Q. No new polymorphic type construct should be introduced</a>
<ul>
<li>🚫️ <code>tagged</code> is a new type construct</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="summary-of-spec-changes-1">Summary of spec changes<a href="#summary-of-spec-changes-1" class="hash-link" aria-label="Direct link to Summary of spec changes" title="Direct link to Summary of spec changes">​</a></h3>
<ul>
<li><strong>SDL</strong>: introduce new <code>tagged input</code> and <code>tagged output</code> definitions,
including member fields</li>
<li><strong>Introspection</strong>: add new type and <code>__Type.memberFields</code> field to relate to
these fields, and <code>__Type.isInputType</code>/<code>__Type.isOutputType</code> fields to
differentiate input versus output tagged types</li>
<li><strong>Schema validation</strong>: tagged types must contain only types that are
compatible (matching input or output) and must contain at least one field</li>
<li><strong>Operation validation</strong>: when validating a tagged input type, assert that
exactly one field was specified</li>
</ul>
<p><a href="https://github.com/graphql/graphql-spec/pull/733/files" target="_blank" rel="noopener noreferrer">The full spec changes can be seen here</a>.</p>
<h1>🏆 Evaluation Overview</h1>
<p>A quick glance at the evaluation results. Remember that passing or failing a specific criteria is NOT the final word.</p>
<table><thead><tr><th></th><th><a href="#-1-explicit-__typename-discriminator-field">1</a></th><th><a href="#-2-explicit-configurable-discriminator-field">2</a></th><th><a href="#-3-order-based-discrimination">3</a></th><th><a href="#-4-structural-uniqueness">4</a></th><th><a href="#-5-one-of-tagged-union">5</a></th><th><a href="#-6-pending">6</a></th><th><a href="#-7-tagged-type">7</a></th></tr></thead><tbody><tr><td><a href="#-a-graphql-should-contain-a-polymorphic-input-type">A</a> 🥇</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>?</td><td>✅</td></tr><tr><td><a href="#-b-input-polymorphism-matches-output-polymorphism">B</a> 🥇</td><td>✅⚠️</td><td>✅</td><td>✅</td><td>✅⚠️</td><td>🚫</td><td>?</td><td>✅⚠️</td></tr><tr><td><a href="#-c-doesnt-inhibit-schema-evolution">C</a> 🥇</td><td>✅</td><td>✅⚠️</td><td>🚫</td><td>⚠️</td><td>✅</td><td>?</td><td>✅</td></tr><tr><td><a href="#-d-any-member-type-restrictions-are-validated-in-schema">D</a> 🥇</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>?</td><td>✅</td></tr><tr><td><a href="#-e-a-member-type-may-be-a-leaf-type">E</a> 🥉</td><td>🚫</td><td>🚫</td><td>✅⚠️</td><td>🚫</td><td>✅</td><td>?</td><td>✅</td></tr><tr><td><a href="#-f-migrating-a-field-to-a-polymorphic-input-type-is-non-breaking">F</a> 🥉</td><td>✅⚠️</td><td>✅⚠️</td><td>✅</td><td>⚠️</td><td>🚫</td><td>?</td><td>🚫</td></tr><tr><td><a href="#-g-input-unions-may-include-other-input-unions">G</a> 🥉</td><td>❔</td><td>❔</td><td>❔</td><td>❔</td><td>❔</td><td>?</td><td>✅</td></tr><tr><td><a href="#-h-input-unions-should-accept-plain-data">H</a> 🥉</td><td>⚠️</td><td>⚠️</td><td>✅</td><td>✅</td><td>⚠️</td><td>?</td><td>⚠️</td></tr><tr><td><a href="#-i-input-unions-should-be-easy-to-upgrade-from-existing-solutions">I</a> 🥉</td><td>✅</td><td>✅</td><td>✅</td><td>⚠️</td><td>✅</td><td>?</td><td>✅</td></tr><tr><td><a href="#-j-a-graphql-schema-that-supports-input-unions-can-be-queried-by-older-graphql-clients">J</a> 🥇</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>?</td><td>✅</td></tr><tr><td><a href="#-k-input-unions-should-be-expressed-efficiently-in-the-query-and-on-the-wire">K</a> 🥉</td><td>✅</td><td>⚠️</td><td>✅</td><td>✅</td><td>✅</td><td>?</td><td>✅</td></tr><tr><td><a href="#-l-input-unions-should-be-performant-for-servers">L</a> 🥉</td><td>✅</td><td>✅</td><td>⚠️</td><td>⚠️</td><td>✅</td><td>?</td><td>✅</td></tr><tr><td><a href="#-m-existing-sdl-parsers-are-backwards-compatible-with-sdl-additions">M</a> 🥈</td><td>🚫</td><td>🚫</td><td>🚫</td><td>🚫</td><td>✅</td><td>?</td><td>🚫</td></tr><tr><td><a href="#-n-existing-code-generated-tooling-is-backwards-compatible-with-introspection-additions">N</a> 🥈</td><td>✅⚠️</td><td>✅⚠️</td><td>✅⚠️</td><td>✅⚠️</td><td>✅</td><td>?</td><td>✅⚠️</td></tr><tr><td><a href="#-o-unconstrained-combination-of-input-types-to-unions">O</a> 🥈</td><td>✅️</td><td>🚫️</td><td>❔</td><td>🚫</td><td>✅</td><td>?</td><td>✅</td></tr><tr><td><a href="#-p-error-states-and-messages-should-be-clear-and-helpful">P</a> 🥉</td><td>✅️</td><td>✅️</td><td>⚠️</td><td>🚫</td><td>✅</td><td>❔</td><td>✅</td></tr><tr><td><a href="#-q-no-new-polymorphic-type-construct-should-be-introduced">Q</a> 🥉</td><td>🚫</td><td>🚫</td><td>✅️</td><td>🚫</td><td>✅</td><td>❔</td><td>🚫</td></tr></tbody></table>
<h1>☑️ Decision Time!</h1>
<p>Following meetings of the GraphQL Input Unions working group, <a href="#-7-tagged-type">Solution 7</a> was
proposed as an evolution of Solution 5, and is currently the leading solution.</p>
<p><del>According to a simple <a href="https://docs.google.com/spreadsheets/d/1ymKqI6BSTHGGHkf9IDjo0EJmOqMryS-uQRwDV77OF5g/edit?usp=sharing" target="_blank" rel="noopener noreferrer">weight ranking</a>, here are the solutions in order:</del></p>
<ul>
<li><del><a href="#-5-one-of-tagged-union">5</a></del></li>
<li><del><a href="#-1-explicit-__typename-discriminator-field">1</a></del></li>
<li><del><a href="#-2-explicit-configurable-discriminator-field">2</a></del></li>
<li><del><a href="#-3-order-based-discrimination">3</a> / <a href="#-4-structural-uniqueness">4</a></del></li>
</ul>
</blockquote></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rfcs/SchemaCoordinates"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Schema Coordinates</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rfcs/FeatureDiscovery"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Feature Discovery</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#at-a-glance" class="table-of-contents__link toc-highlight">At a glance</a></li><li><a href="#timeline" class="table-of-contents__link toc-highlight">Timeline</a></li><li><a href="#rfc-graphql-input-union" class="table-of-contents__link toc-highlight">RFC: GraphQL Input Union</a><ul><li><a href="#contributing" class="table-of-contents__link toc-highlight">Contributing</a></li></ul></li><li><a href="#-a-graphql-should-contain-a-polymorphic-input-type" class="table-of-contents__link toc-highlight">🎯 A. GraphQL should contain a polymorphic Input type</a></li><li><a href="#-b-input-polymorphism-matches-output-polymorphism" class="table-of-contents__link toc-highlight">🎯 B. Input polymorphism matches output polymorphism</a></li><li><a href="#-c-doesnt-inhibit-schema-evolution" class="table-of-contents__link toc-highlight">🎯 C. Doesn&#39;t inhibit schema evolution</a></li><li><a href="#-d-any-member-type-restrictions-are-validated-in-schema" class="table-of-contents__link toc-highlight">🎯 D. Any member type restrictions are validated in schema</a></li><li><a href="#-e-a-member-type-may-be-a-leaf-type" class="table-of-contents__link toc-highlight">🎯 E. A member type may be a Leaf type</a></li><li><a href="#-f-migrating-a-field-to-a-polymorphic-input-type-is-non-breaking" class="table-of-contents__link toc-highlight">🎯 F. Migrating a field to a polymorphic input type is non-breaking</a></li><li><a href="#-g-input-unions-may-include-other-input-unions" class="table-of-contents__link toc-highlight">🎯 G. Input unions may include other input unions</a></li><li><a href="#-h-input-unions-should-accept-plain-data" class="table-of-contents__link toc-highlight">🎯 H. Input unions should accept plain data</a></li><li><a href="#-i-input-unions-should-be-easy-to-upgrade-from-existing-solutions" class="table-of-contents__link toc-highlight">🎯 I. Input unions should be easy to upgrade from existing solutions</a></li><li><a href="#-j-a-graphql-schema-that-supports-input-unions-can-be-queried-by-older-graphql-clients" class="table-of-contents__link toc-highlight">🎯 J. A GraphQL schema that supports input unions can be queried by older GraphQL clients</a></li><li><a href="#-k-input-unions-should-be-expressed-efficiently-in-the-query-and-on-the-wire" class="table-of-contents__link toc-highlight">🎯 K. Input unions should be expressed efficiently in the query and on the wire</a></li><li><a href="#-l-input-unions-should-be-performant-for-servers" class="table-of-contents__link toc-highlight">🎯 L. Input unions should be performant for servers</a></li><li><a href="#-m-existing-sdl-parsers-are-backwards-compatible-with-sdl-additions" class="table-of-contents__link toc-highlight">🎯 M. Existing SDL parsers are backwards compatible with SDL additions</a></li><li><a href="#-n-existing-code-generated-tooling-is-backwards-compatible-with-introspection-additions" class="table-of-contents__link toc-highlight">🎯 N. Existing code generated tooling is backwards compatible with Introspection additions</a></li><li><a href="#-o-unconstrained-combination-of-input-types-to-unions" class="table-of-contents__link toc-highlight">🎯 O. Unconstrained combination of input types to unions</a></li><li><a href="#-p-error-states-and-messages-should-be-clear-and-helpful" class="table-of-contents__link toc-highlight">🎯 P. Error states and messages should be clear and helpful</a></li><li><a href="#-q-no-new-polymorphic-type-construct-should-be-introduced" class="table-of-contents__link toc-highlight">🎯 Q. No new polymorphic type construct should be introduced</a></li><li><a href="#-p-validation-rule-should-produce-easy-to-understand-error-message" class="table-of-contents__link toc-highlight">🎯 P. Validation rule should produce easy to understand error message</a></li><li><a href="#-1-explicit-__typename-discriminator-field" class="table-of-contents__link toc-highlight">💡 1. Explicit <code>__typename</code> Discriminator field</a><ul><li><a href="#-variations" class="table-of-contents__link toc-highlight">🎲 Variations</a></li><li><a href="#️-evaluation" class="table-of-contents__link toc-highlight">⚖️ Evaluation</a></li></ul></li><li><a href="#-2-explicit-configurable-discriminator-field" class="table-of-contents__link toc-highlight">💡 2. Explicit configurable Discriminator field</a><ul><li><a href="#-variations-1" class="table-of-contents__link toc-highlight">🎲 Variations</a></li><li><a href="#️-evaluation-1" class="table-of-contents__link toc-highlight">⚖️ Evaluation</a></li></ul></li><li><a href="#-3-order-based-discrimination" class="table-of-contents__link toc-highlight">💡 3. Order based discrimination</a><ul><li><a href="#️-evaluation-2" class="table-of-contents__link toc-highlight">⚖️ Evaluation</a></li></ul></li><li><a href="#-4-structural-uniqueness" class="table-of-contents__link toc-highlight">💡 4. Structural uniqueness</a><ul><li><a href="#-variations-2" class="table-of-contents__link toc-highlight">🎲 Variations</a></li><li><a href="#️-evaluation-3" class="table-of-contents__link toc-highlight">⚖️ Evaluation</a></li></ul></li><li><a href="#-5-one-of-tagged-union" class="table-of-contents__link toc-highlight">💡 5. One Of (Tagged Union)</a><ul><li><a href="#️-evaluation-4" class="table-of-contents__link toc-highlight">⚖️ Evaluation</a></li><li><a href="#summary-of-spec-changes" class="table-of-contents__link toc-highlight">Summary of spec changes</a></li></ul></li><li><a href="#-6-pending" class="table-of-contents__link toc-highlight">💡 6. Pending</a></li><li><a href="#-7-tagged-type" class="table-of-contents__link toc-highlight">💡 7. Tagged Type</a><ul><li><a href="#️-evaluation-5" class="table-of-contents__link toc-highlight">⚖️ Evaluation</a></li><li><a href="#summary-of-spec-changes-1" class="table-of-contents__link toc-highlight">Summary of spec changes</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Benjie Gillam; all rights reserved. RFC pages pull content from public GitHub issues/PRs/files/etc; this content remains owned its various authors.</div></div></div></footer></div>
</body>
</html>