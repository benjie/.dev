---
identifier: "793"
title: Default value coercion rules
stage: "3"
champion: benjie
prUrl: https://github.com/graphql/graphql-spec/pull/793
events:
  - type: wgAgenda
    href: https://github.com/graphql/graphql-wg/blob/main/agendas/2025/06-Jun/05-wg-primary.md
    date: 2025-06-05
    actor: null
  - type: commitsPushed
    date: 2025-05-22
    href: https://github.com/graphql/graphql-spec/commit/4f76d6f7a39c55119259bb36a990d6433453cf93
    actor: benjie
    commits:
      - href: https://github.com/graphql/graphql-spec/commit/4f76d6f7a39c55119259bb36a990d6433453cf93
        headline: Fix accidental mutation
        ghUser: benjie
        authorName: Benjie
      - href: https://github.com/graphql/graphql-spec/commit/4bac8df736c527ce3ecc2828ebfca951b4ad1048
        headline: Merge branch 'main' into input-object-default-value
        ghUser: benjie
        authorName: Benjie Gillam
  - type: wgAgenda
    href: https://github.com/graphql/graphql-wg/blob/main/agendas/2025/05-May/01-wg-primary.md
    date: 2025-05-01
    actor: null
  - type: wgAgenda
    href: https://github.com/graphql/graphql-wg/blob/main/agendas/2025/04-Apr/03-wg-primary.md
    date: 2025-04-03
    actor: null
  - type: commitsPushed
    date: 2025-03-07
    href: https://github.com/graphql/graphql-spec/commit/9a64519e4b7831971d2e7a909b2eb170be8fc895
    actor: benjie
    commits:
      - href: https://github.com/graphql/graphql-spec/commit/9a64519e4b7831971d2e7a909b2eb170be8fc895
        headline: Merge branch 'main' into input-object-default-value
        ghUser: benjie
        authorName: Benjie Gillam
      - href: https://github.com/graphql/graphql-spec/commit/8beb848ba82fdde4599eccf5d3906ad3dada5365
        headline: Rather than assertions, use return values.
        ghUser: benjie
        authorName: Benjie Gillam
  - type: wgAgenda
    href: https://github.com/graphql/graphql-wg/blob/main/agendas/2023/12-Dec/07-wg-primary.md
    date: 2023-12-07
    actor: null
  - type: wgNotes
    href: https://github.com/graphql/graphql-wg/blob/main/notes/2023/2023-12.md
    date: 2023-12
    actor: null
  - type: wgAgenda
    href: https://github.com/graphql/graphql-wg/blob/main/agendas/2023/06-Jun/01-wg-primary.md
    date: 2023-06-01
    actor: null
  - type: wgNotes
    href: https://github.com/graphql/graphql-wg/blob/main/notes/2023/2023-06.md
    date: 2023-06
    actor: null
  - type: wgAgenda
    href: https://github.com/graphql/graphql-wg/blob/main/agendas/2023/03-Mar/02-wg-primary.md
    date: 2023-03-02
    actor: null
  - type: wgNotes
    href: https://github.com/graphql/graphql-wg/blob/main/notes/2023/2023-03.md
    date: 2023-03
    actor: null
  - type: wgAgenda
    href: https://github.com/graphql/graphql-wg/blob/main/agendas/2023/02-Feb/02-wg-primary.md
    date: 2023-02-02
    actor: null
  - type: wgNotes
    href: https://github.com/graphql/graphql-wg/blob/main/notes/2023/2023-02.md
    date: 2023-02
    actor: null
  - type: commitsPushed
    date: 2023-01-31
    href: https://github.com/graphql/graphql-spec/commit/bb6ab78d75ca5279e7065a47e40150b5c1219764
    actor: benjie
    commits:
      - href: https://github.com/graphql/graphql-spec/commit/bb6ab78d75ca5279e7065a47e40150b5c1219764
        headline: Merge branch 'main' into input-object-default-value
        ghUser: benjie
        authorName: Benjie Gillam
  - type: commitsPushed
    date: 2022-01-06
    href: https://github.com/graphql/graphql-spec/commit/475d697737ebe967976d561f9092a802b8431a58
    actor: benjie
    commits:
      - href: https://github.com/graphql/graphql-spec/commit/475d697737ebe967976d561f9092a802b8431a58
        headline: Rewrite default value cycle algorithm in the style of DetectFragmentC…
        ghUser: benjie
        authorName: Benjie Gillam
      - href: https://github.com/graphql/graphql-spec/commit/dde1f7bdf8efc28e7ebde06574fe9c57430ad910
        headline: Rewrite input object cycle algorithm to match GraphQL.js implementation
        ghUser: benjie
        authorName: Benjie Gillam
      - href: https://github.com/graphql/graphql-spec/commit/12e26d894bfb6f97ac79a6b4ec10564fc6b7fe8a
        headline: Asterisks
        ghUser: benjie
        authorName: Benjie Gillam
      - href: https://github.com/graphql/graphql-spec/commit/2838c4f739e93bab997ca021364a50cdb76f967b
        headline: Remove unnecessary step
        ghUser: benjie
        authorName: Benjie Gillam
      - href: https://github.com/graphql/graphql-spec/commit/9b7bfd525e9718587f58fdfde39e2fcb73386d2b
        headline: Add non-normative note about memoizing default value coercion
        ghUser: benjie
        authorName: Benjie Gillam
  - type: wgAgenda
    href: https://github.com/graphql/graphql-wg/blob/main/agendas/2022/2022-01-06.md
    date: 2022-01-06
    actor: null
  - type: wgNotes
    href: https://github.com/graphql/graphql-wg/blob/main/notes/2022/2022-01-06.md
    date: 2022-01-06
    actor: null
  - type: wgAgenda
    href: https://github.com/graphql/graphql-wg/blob/main/agendas/2021/2021-05-13.md
    date: 2021-05-13
    actor: null
  - type: wgNotes
    href: https://github.com/graphql/graphql-wg/blob/main/notes/2021/2021-05-13.md
    date: 2021-05-13
    actor: null
  - type: commitsPushed
    date: 2021-05-03
    href: https://github.com/graphql/graphql-spec/commit/084b2d55e961d3259cbd191bfb7a8e9ad1c22b05
    actor: benjie
    commits:
      - href: https://github.com/graphql/graphql-spec/commit/084b2d55e961d3259cbd191bfb7a8e9ad1c22b05
        headline: Clarify the default value cycle detection logic
        ghUser: benjie
        authorName: Benjie Gillam
  - type: wgAgenda
    href: https://github.com/graphql/graphql-wg/blob/main/agendas/2021/2021-03-04.md
    date: 2021-03-04
    actor: null
  - type: wgNotes
    href: https://github.com/graphql/graphql-wg/blob/main/notes/2021/2021-03-04.md
    date: 2021-03-04
    actor: null
  - type: commitsPushed
    date: 2021-02-26
    href: https://github.com/graphql/graphql-spec/commit/f73af73cfd778d43e338a3e11cd93b9641f4a266
    actor: benjie
    commits:
      - href: https://github.com/graphql/graphql-spec/commit/f73af73cfd778d43e338a3e11cd93b9641f4a266
        headline: Reorder assertions to prevent infinite loop during coercion
        ghUser: benjie
        authorName: Benjie Gillam
      - href: https://github.com/graphql/graphql-spec/commit/5e793fb5df4e52d096dc6590129604f31fe8d05e
        headline: Reduce diff
        ghUser: benjie
        authorName: Benjie Gillam
  - type: commitsPushed
    date: 2021-02-19
    href: https://github.com/graphql/graphql-spec/commit/25da05630af7dbd66a525448ecf8f6d921512851
    actor: benjie
    commits:
      - href: https://github.com/graphql/graphql-spec/commit/25da05630af7dbd66a525448ecf8f6d921512851
        headline: Fix 'must not cause an infinite loop' wording.
        ghUser: benjie
        authorName: Benjie Gillam
  - type: wgAgenda
    href: https://github.com/graphql/graphql-wg/blob/main/agendas/2021/2021-01-07.md
    date: 2021-01-07
    actor: null
  - type: wgNotes
    href: https://github.com/graphql/graphql-wg/blob/main/notes/2021/2021-01-07.md
    date: 2021-01-07
    actor: null
  - type: wgAgenda
    href: https://github.com/graphql/graphql-wg/blob/main/agendas/2020/2020-12-03.md
    date: 2020-12-03
    actor: null
  - type: wgNotes
    href: https://github.com/graphql/graphql-wg/blob/main/notes/2020/2020-12-03.md
    date: 2020-12-03
    actor: null
  - type: prCreated
    date: 2020-11-13T12:23:11Z
    href: https://github.com/graphql/graphql-spec/pull/793
    actor: benjie
  - type: commitsPushed
    date: 2020-11-13
    href: https://github.com/graphql/graphql-spec/commit/8939e209624e81523702c59af1842efa42d1f9d6
    actor: benjie
    commits:
      - href: https://github.com/graphql/graphql-spec/commit/8939e209624e81523702c59af1842efa42d1f9d6
        headline: Default value coercion rules
        ghUser: benjie
        authorName: Benjie Gillam
shortname: Default value coercion rules
image: /img/rfc_tracker.png
---

## At a glance

- **Identifier**: #793
- **Stage**: [RFC3: Accepted](https://github.com/graphql/graphql-spec/blob/main/CONTRIBUTING.md#stage-3-accepted)
- **Champion**: [@benjie](https://github.com/benjie)
- **PR**: [Default value coercion rules](https://github.com/graphql/graphql-spec/pull/793)

<!-- BEGIN_CUSTOM_TEXT -->



<!-- END_CUSTOM_TEXT -->

## Timeline

- **Added to [2025-06-05 WG agenda](https://github.com/graphql/graphql-wg/blob/main/agendas/2025/06-Jun/05-wg-primary.md)**
- **2 commits pushed** on 2025-05-22:
  - [Fix accidental mutation](https://github.com/graphql/graphql-spec/commit/4f76d6f7a39c55119259bb36a990d6433453cf93) by [@benjie](https://github.com/benjie)
  - [Merge branch 'main' into input-object-default-value](https://github.com/graphql/graphql-spec/commit/4bac8df736c527ce3ecc2828ebfca951b4ad1048) by [@benjie](https://github.com/benjie)
- **Added to [2025-05-01 WG agenda](https://github.com/graphql/graphql-wg/blob/main/agendas/2025/05-May/01-wg-primary.md)**
- **Added to [2025-04-03 WG agenda](https://github.com/graphql/graphql-wg/blob/main/agendas/2025/04-Apr/03-wg-primary.md)**
- **2 commits pushed** on 2025-03-07:
  - [Merge branch 'main' into input-object-default-value](https://github.com/graphql/graphql-spec/commit/9a64519e4b7831971d2e7a909b2eb170be8fc895) by [@benjie](https://github.com/benjie)
  - [Rather than assertions, use return values.](https://github.com/graphql/graphql-spec/commit/8beb848ba82fdde4599eccf5d3906ad3dada5365) by [@benjie](https://github.com/benjie)
- **Added to [2023-12-07 WG agenda](https://github.com/graphql/graphql-wg/blob/main/agendas/2023/12-Dec/07-wg-primary.md)**
- **Mentioned in [2023-12 WG notes](https://github.com/graphql/graphql-wg/blob/main/notes/2023/2023-12.md)**
- **Added to [2023-06-01 WG agenda](https://github.com/graphql/graphql-wg/blob/main/agendas/2023/06-Jun/01-wg-primary.md)**
- **Mentioned in [2023-06 WG notes](https://github.com/graphql/graphql-wg/blob/main/notes/2023/2023-06.md)**
- **Added to [2023-03-02 WG agenda](https://github.com/graphql/graphql-wg/blob/main/agendas/2023/03-Mar/02-wg-primary.md)**
- **Mentioned in [2023-03 WG notes](https://github.com/graphql/graphql-wg/blob/main/notes/2023/2023-03.md)**
- **Added to [2023-02-02 WG agenda](https://github.com/graphql/graphql-wg/blob/main/agendas/2023/02-Feb/02-wg-primary.md)**
- **Mentioned in [2023-02 WG notes](https://github.com/graphql/graphql-wg/blob/main/notes/2023/2023-02.md)**
- **Commit pushed**: [Merge branch 'main' into input-object-default-value](https://github.com/graphql/graphql-spec/commit/bb6ab78d75ca5279e7065a47e40150b5c1219764) on 2023-01-31 by [@benjie](https://github.com/benjie)
- **5 commits pushed** on 2022-01-06:
  - [Rewrite default value cycle algorithm in the style of DetectFragmentC…](https://github.com/graphql/graphql-spec/commit/475d697737ebe967976d561f9092a802b8431a58) by [@benjie](https://github.com/benjie)
  - [Rewrite input object cycle algorithm to match GraphQL.js implementation](https://github.com/graphql/graphql-spec/commit/dde1f7bdf8efc28e7ebde06574fe9c57430ad910) by [@benjie](https://github.com/benjie)
  - [Asterisks](https://github.com/graphql/graphql-spec/commit/12e26d894bfb6f97ac79a6b4ec10564fc6b7fe8a) by [@benjie](https://github.com/benjie)
  - [Remove unnecessary step](https://github.com/graphql/graphql-spec/commit/2838c4f739e93bab997ca021364a50cdb76f967b) by [@benjie](https://github.com/benjie)
  - [Add non-normative note about memoizing default value coercion](https://github.com/graphql/graphql-spec/commit/9b7bfd525e9718587f58fdfde39e2fcb73386d2b) by [@benjie](https://github.com/benjie)
- **Added to [2022-01-06 WG agenda](https://github.com/graphql/graphql-wg/blob/main/agendas/2022/2022-01-06.md)**
- **Mentioned in [2022-01-06 WG notes](https://github.com/graphql/graphql-wg/blob/main/notes/2022/2022-01-06.md)**
- **Added to [2021-05-13 WG agenda](https://github.com/graphql/graphql-wg/blob/main/agendas/2021/2021-05-13.md)**
- **Mentioned in [2021-05-13 WG notes](https://github.com/graphql/graphql-wg/blob/main/notes/2021/2021-05-13.md)**
- **Commit pushed**: [Clarify the default value cycle detection logic](https://github.com/graphql/graphql-spec/commit/084b2d55e961d3259cbd191bfb7a8e9ad1c22b05) on 2021-05-03 by [@benjie](https://github.com/benjie)
- **Added to [2021-03-04 WG agenda](https://github.com/graphql/graphql-wg/blob/main/agendas/2021/2021-03-04.md)**
- **Mentioned in [2021-03-04 WG notes](https://github.com/graphql/graphql-wg/blob/main/notes/2021/2021-03-04.md)**
- **2 commits pushed** on 2021-02-26:
  - [Reorder assertions to prevent infinite loop during coercion](https://github.com/graphql/graphql-spec/commit/f73af73cfd778d43e338a3e11cd93b9641f4a266) by [@benjie](https://github.com/benjie)
  - [Reduce diff](https://github.com/graphql/graphql-spec/commit/5e793fb5df4e52d096dc6590129604f31fe8d05e) by [@benjie](https://github.com/benjie)
- **Commit pushed**: [Fix 'must not cause an infinite loop' wording.](https://github.com/graphql/graphql-spec/commit/25da05630af7dbd66a525448ecf8f6d921512851) on 2021-02-19 by [@benjie](https://github.com/benjie)
- **Added to [2021-01-07 WG agenda](https://github.com/graphql/graphql-wg/blob/main/agendas/2021/2021-01-07.md)**
- **Mentioned in [2021-01-07 WG notes](https://github.com/graphql/graphql-wg/blob/main/notes/2021/2021-01-07.md)**
- **Added to [2020-12-03 WG agenda](https://github.com/graphql/graphql-wg/blob/main/agendas/2020/2020-12-03.md)**
- **Mentioned in [2020-12-03 WG notes](https://github.com/graphql/graphql-wg/blob/main/notes/2020/2020-12-03.md)**
- **[Spec PR](https://github.com/graphql/graphql-spec/pull/793) created** on 2020-11-13 by benjie
- **Commit pushed**: [Default value coercion rules](https://github.com/graphql/graphql-spec/commit/8939e209624e81523702c59af1842efa42d1f9d6) on 2020-11-13 by [@benjie](https://github.com/benjie)

<!-- VERBATIM -->

---

> [Coercing Field Arguments](http://spec.graphql.org/draft/#sec-Coercing-Field-Arguments) states:
> 
> > 5.c. Let defaultValue be the default value for argumentDefinition.
> > [...]
> > 5.h. If hasValue is not true and defaultValue exists (including null):
> > 5.h.i. Add an entry to coercedValues named argumentName with the value defaultValue.
> > [...]
> > 5.j.iii.1. If value cannot be coerced according to the input coercion rules of argumentType, throw a field error.
> > 5.j.iii.2. Let coercedValue be the result of coercing value according to the input coercion rules of argumentType.
> > 5.j.iii.3. Add an entry to coercedValues named argumentName with the value coercedValue.
> 
> Here we note that there is no run-time coercion of `defaultValue`, which makes sense (why do at runtime that which can be done at build time?). However, there doesn't seem to be a rule that specifies that `defaultValue` must be coerced at all, which leads to consequences:
> 
> 1. you could use any value for defaultValue and it could break the type safety guarantees of GraphQL
> 2. [nested defaultValues are not applied](https://github.com/graphql/graphql-js/issues/385)
> 
> When building the following GraphQL schema programmatically (code below) with GraphQL.js:
> 
> ```graphql
> type Query {
>   example(inputObject: ExampleInputObject! = {}): Int
> }
> 
> input ExampleInputObject {
>   number: Int! = 3
> }
> ```
> 
> And a resolver for `Query.example`:
> 
> ```js
> resolve(source, args) {
>   return args.inputObject.number;
> }
> ```
> 
> You might expect the following queries to all gave the same result:
> 
> ```graphql
> query A {
>   example
> }
> query B {
>   example(inputObject: {})
> }
> query C {
>   example(inputObject: { number: 3 })
> }
> query D($inputObject: ExampleInputObject! = {}) {
>   example(inputObject: $inputObject)
> }
> ```
> 
> However, it turns out that query A's result differs:
> 
> ```json
> {"example":null}
> {"example":3}
> {"example":3}
> {"example":3}
> ```
> 
> This is because `defaultValue` for `Query.example(inputObject:)` was not coerced, so none of the defaultValues of `ExampleInputObject` were applied.
> 
> This is extremely unexpected, because looking at the GraphQL schema definition it looks like there's no circumstance under which `ExampleInputObject` may not have `number` as an integer; however when the `defaultValue` of `Query.example(inputObject:)` is used, the value of `number` is `undefined`.
> 
> <details>
> <summary>Example runnable with GraphQL.js</summary>
> 
> ```js
> const {
>   graphqlSync,
>   printSchema,
>   GraphQLSchema,
>   GraphQLObjectType,
>   GraphQLInputObjectType,
>   GraphQLInt,
>   GraphQLNonNull,
> } = require("graphql");
> 
> const ExampleInputObject = new GraphQLInputObjectType({
>   name: "ExampleInputObject",
>   fields: {
>     number: {
>       type: new GraphQLNonNull(GraphQLInt),
>       defaultValue: 3,
>     },
>   },
> });
> 
> const Query = new GraphQLObjectType({
>   name: "Query",
>   fields: {
>     example: {
>       args: {
>         inputObject: {
>           type: new GraphQLNonNull(ExampleInputObject),
>           defaultValue: {},
>         },
>       },
>       type: GraphQLInt,
>       resolve(source, args) {
>         return args.inputObject.number;
>       },
>     },
>   },
> });
> 
> const schema = new GraphQLSchema({
>   query: Query,
> });
> 
> console.log(printSchema(schema));
> 
> // All four of these should be equivalent?
> const source = /* GraphQL */ `
>   query A {
>     example
>   }
>   query B {
>     example(inputObject: {})
>   }
>   query C {
>     example(inputObject: { number: 3 })
>   }
>   query D($inputObject: ExampleInputObject! = {}) {
>     example(inputObject: $inputObject)
>   }
> `;
> const result1 = graphqlSync({ schema, source, operationName: "A" });
> const result2 = graphqlSync({ schema, source, operationName: "B" });
> const result3 = graphqlSync({ schema, source, operationName: "C" });
> const result4 = graphqlSync({ schema, source, operationName: "D" });
> 
> console.log(JSON.stringify(result1.data));
> console.log(JSON.stringify(result2.data));
> console.log(JSON.stringify(result3.data));
> console.log(JSON.stringify(result4.data));
> ```
> 
> </details>
> 
> This was [raised against GraphQL.js back in 2016](https://github.com/graphql/graphql-js/issues/385), but @IvanGoncharov closed it early last year stating that GraphQL.js conforms to the GraphQL Spec in this regard.
> 
> My proposal is that when a `defaultValue` is specified, the GraphQL implementation should coerce it to conform to the relevant type just like it does for runtime values as specified in [Coercing Variable Values](https://spec.graphql.org/draft/#sec-Coercing-Variable-Values) and [Coercing Field Arguments](https://spec.graphql.org/draft/#sec-Coercing-Field-Arguments).
> 
> ---
> 
> This is validated for query documents (and schema defined as SDL), because:
> 
> > Literal values must be compatible with the type expected in the position they are found as per the coercion rules defined in the Type System chapter.
> > -- http://spec.graphql.org/draft/#sel-FALXDFDDAACFAhuF
> 
> But there doesn't seem to be any such assertion for GraphQL schemas defined in code.
> 
> ---
> 
> GraphQL.js implementation: https://github.com/graphql/graphql-js/pull/3814
